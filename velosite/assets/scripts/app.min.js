(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
var sliders = [
	require('./sliders/indexProducts'),
	require('./sliders/indexMainBanner'),
	require('./sliders/videoSlider'),
	require('./sliders/bikeMissing'),
	require('./sliders/compare')
];

var toggles = require('./navbar/toggles');
var popups = require('./popup/popup');
var forms = require('./forms/forms');
var videos = require('./card/videos');
var tabs = require('./tabs/tabs');
var switchShopForm = require('./forms/switchShopForm');
var bigCardGallery = require('./card/bigCardGallery');
var colorChooser = require('./forms/colorChooser');
var basket = require('./basket/basket');
var velomaster = require('./velomaster/velomaster');
$(document).ready(function () {
	// loop through the sliders and initialize them
	sliders.map(function (slider) {
		slider.init();
	});
	toggles.init();
	popups.init();
	forms.init();
	videos.init();
	tabs.init();
	switchShopForm.init();
	bigCardGallery.init();
	colorChooser.init();
	basket.init();
	velomaster.init();

	$('#brandsTrigger').on('click', function() {
		$(this).parent().toggleClass('brands--full');
		$(this).toggleClass('brands__trigger-inner-rotate');
	});

	$('#popuplarMore').on('click', function() {
		$('.popular-links__item--group').removeClass('popular-links__item--group-hidden');
		$(this).hide();
		return false;
	});

	// show product popup review after 1 second
	setTimeout(function() {
		$('#product-popup').toggleClass('product-page-popup--visible');
	}, 1000);
	var product = setTimeout(function() {
		$('#product-popup').removeClass('product-page-popup--visible');
	}, 21000);
	$('.product-page-popup-wrapper').on('click', '.product-page-popup__top_close-cross', function() {
		$(this).closest('.product-page-popup-wrapper').toggleClass('product-page-popup--visible');
		clearTimeout(product)
	});

	var brands = {
		showBrands: function(){
			var me = this;
			var brandsList = me.brands.find('.brands-list');
			me.brands.find('.brands-list-show-all').text('Скрыть все');
			brandsList.animate({maxHeight: '200px'}, 300);
			me.brands.addClass('brands-list--outer-show');
			brandsList.addClass('brands-list--shown');
		},
		hideBrands: function(){
			var me = this;
			var brandsList = me.brands.find('.brands-list');
			me.brands.find('.brands-list-show-all').text('Показать все');
			brandsList.animate({maxHeight: '50px'}, 300, function(){
				me.brands.removeClass('brands-list--outer-show');
				brandsList.removeClass('brands-list--shown');
			});
		},
		brands: $('#brandsBlock'),
		init: function(){
			var me = this;
			$('.brands-list--close').on('click', function(){
				me.hideBrands();
				return false;
			});
			$('.brands-list-show-all').on('click', function(){
				if (me.brands.hasClass('brands-list--outer-show'))
					me.hideBrands();
				else
					me.showBrands();
				return false;
			});
			me.brands.on('click', function(e){
				e.stopPropagation();
			});
			$('body').on('click', function(){
				me.hideBrands();
			})

		}
	};
	if ($('#brandsBlock').length)
		brands.init();




});

},{"./basket/basket":2,"./card/bigCardGallery":3,"./card/videos":4,"./forms/colorChooser":5,"./forms/forms":6,"./forms/switchShopForm":7,"./navbar/toggles":8,"./popup/popup":9,"./sliders/bikeMissing":10,"./sliders/compare":11,"./sliders/indexMainBanner":12,"./sliders/indexProducts":13,"./sliders/videoSlider":14,"./tabs/tabs":15,"./velomaster/velomaster":16}],2:[function(require,module,exports){
module.exports = {
	init: function () {
		numeral.language('ru');
		// increase col
		$('.basket__increase').on('click', function(){
			var col = parseInt($(this).parent().find('.basket__col-input').val());
			col++;
			$(this).parent().find('.basket__col-input').val(col);

			// todo -- add ajax to increase col
			changePrice(30000, 50000);
		});
		// decrease col
		$('.basket__decrease').on('click', function(){
			var col = parseInt($(this).parent().find('.basket__col-input').val());
			col--;
			if (col == 0)
				return false;
			$(this).parent().find('.basket__col-input').val(col);

			changePrice(30000, 50000);
		});
		$('.basket__remove').on('click', function(){
			$(this).closest('.basket__table__row').remove();
			if ($('.basket__table').find('.basket__table__row').length === 1) {
				$('.basket__table').remove();
				$('.basket__empty').show()
			}
			// todo - ajax to remove from basket
			changePrice(30000, 50000);
			return false;
		});

		$(".basket__col-input").on('keypress', function (e) {
			console.log(e.which);
			//if the letter is not digit then display error and don't type anything
			if (e.which != 8 && e.which != 0 && (e.which < 48 || e.which > 57)) {

				//display error message
				return false;
			} else {

				if (!$.trim($(this).val()) === '') {
					changePrice(30000, 50000);
				}
				// todo - ajax change the number
			}
		}).on('blur', function(){
			// if we leave the input and there's empty value
			if ($.trim($(this).val()) === '') {
				$(this).val('1');
				// todo - ajax change the number
			}
		});
		// show basket popup
		$('.basket-popup-trigger').on('click', function(){
			$(this).parent().find('.basket__popup').fadeIn(300);
			return false;
		});
		//change params
		$('.basket__popup__submit').on('click', function(){
			var params = $(this).closest('.basket__popup').find('.book-bike__center_frame-line').html();
			$(this).closest('.basket__popup--outer').find('.basket-popup-trigger').html(params);
			// todo - ajax to change params of the order
			$(this).closest('.basket__popup').fadeOut(300);
			return false;
		});

		// function change price
		function changePrice(newPrice, overallPrice){
			//change price
			$('#basketPrice').text(numeral(newPrice).format('0,0'));
			//change total price
			$('#basketTotalPrice').text(numeral(overallPrice).format('0,0'));
		}
		if ($('#basketSidebar').length) {
			$('#basketSidebar').stick_in_parent({parent:"#basketForm", offset_top: 15});
		}
		$('#promocodeTrigger').on('click', function(){
			$(this).parent().find('.basket__promocode--hidden').slideToggle(300);
			return false
		});
		// user exists check
		$('#basket_email').on('blur', function(){
			// todo - ajax check if user exists
			var contacts = $('#basketContacts');
			$('#basketAuth').css({
				height: contacts.outerHeight()
			}).show();
		});
		$('#basketAuth .basket__close').on('click', function(){
			$('#basketAuth').hide();
		});
		$('.form-plain input[type="text"]').on('focus', function(){
			$(this).parent().find('.basket__no').hide();
			$(this).removeClass('error');
		}).on('blur', function(){
			if ($.trim($(this).val()) !== '') {
				$(this).parent().find('.basket__ok').show();
				$(this).parent().find('.basket__no').hide();
				$(this).removeClass('error').addClass('correct');
			} else {
				$(this).parent().find('.basket__ok').hide();
				$(this).removeClass('correct');
			}
		});
		if ($('#basket_phone').length)
			$('#basket_phone').inputmask({"mask": "+9 (999) 9999999"});
		if ($('#basketForm').length) {
			$('#basketForm').validate({
				onkeyup: false,
				onfocusout: false,
				errorPlacement: function(error, element) {
					$('#errors').show();

					var text = error.text();
					error.text(text + ', ');
					error.appendTo('#errors ul');
					element.parent().find('.basket__ok').hide();
					element.parent().find('.basket__no').show();
				},
				invalidHandler: function(event, validator){
					var errors = validator.numberOfInvalids();
					if (errors) {
						$('#errors').show();
					} else {
						$('#errors').hide();
					}
				}
			})
		}

	}
};
},{}],3:[function(require,module,exports){
var videos = require('../card/videos');

module.exports = {
	init: function () {
		$('.card-big__center:visible').on('init', function () {
			$('.card-big__center:visible').css({
				opacity: 1
			});
		});

		$('.card-big__center:visible').slick({
			dots: true,
			arrows: false,
			infinite: true,
			speed: 500,
			fade: true,
			cssEase: 'ease-out',
			lazyLoad: 'ondemand',
			accessibility: false,
			customPaging: function (slider, i) {
				var _slide = $(slider.$slides[i]);
				var _id = _slide.attr('data-anchor');
				var idString = _id ? ('id="' + _id + '"') : '';
				var videoId = _slide.attr('data-video-id');

				var prepend = '<div class="card-thumbnail"' + idString + '>';
				var append = '</div>';
				var imgURL = _slide.closest('.image').attr('data-thumbnail');
				var imgStr = '<img src="' + (imgURL ? imgURL : '//i.ytimg.com/vi/' + videoId + '/hqdefault.jpg') + '" alt="gallery-thumbnail">';
				var playIcon = _id ? $('#thumbnail-video').clone().html() : '';

				return '<button  class="' + (videoId ? 'thumbnail-video ' : '') + 'tab">' + prepend + imgStr + playIcon + append + '</button>';
			}
		});

		// disable video gallery slide
		$('.slick-dots .thumbnail-video').parent().off('click.slick');

		// scroll to big video player after click on the thumbnail
		$('.slick-dots').on('click', '#thumbnail-video', function (e) {
			$('#innerPoints .tabs__points__item').eq(0).find('a').trigger('click');
			$.scrollTo('#page-video', 400, {offset: {top: -300, left: 0} });

			return false;
		});

		$('body').on({
			click: function () {
				$.scrollTo(0, 400);
				return false;
			}
		}, '#scrollToTop');
	}
};

},{"../card/videos":4}],4:[function(require,module,exports){
module.exports = {
	init: function () {
		// loop through all divs with class "youtube-player" (big player)
		// create thumbnail then add onclick listener
		var v = document.getElementsByClassName("youtube-player");
		for (var n = 0; n < v.length; n++) {
			var p = document.createElement("div");
			if (v[n].getAttribute('data-preview') !== null) {
				p.innerHTML = labnolThumbWithSrc(v[n].getAttribute('data-preview'));
			} else {
				p.innerHTML = labnolThumb(v[n].getAttribute('data-id'));
			}

			if (v[n].className.match(/youtube\-player\-\-mod/g)) {
				(function(n){
					v[n].parentNode.parentNode.parentNode.onclick = function(){
						showPopupVideo({
							id: v[n].getAttribute('data-id'),
							title: v[n].getAttribute('data-title'),
							img: v[n].getAttribute('data-img') || 'preview'
						});
						return false;
					}
				})(n);

			} else {
				p.onclick = labnolIframe;
			}
			v[n].appendChild(p);
		}

		// loop through all divs with class "card__video__suggested_thumbnail" (suggested videos)
		var v2 = document.getElementsByClassName("card__video__suggested_thumbnail");
		for (var n = 0; n < v2.length; n++) {
			var p = document.createElement("div");
			v2[n].getElementsByTagName('IMG')[0].src = 'http://i.ytimg.com/vi/' + v2[n].getAttribute('data-id') + '/hqdefault.jpg';
			v2[n].appendChild(p);
		}

		// crawl thumbnail for video by its id
		function labnolThumb(id) {
			return '<img class="youtube-thumb" src="http://i.ytimg.com/vi/' + id + '/hqdefault.jpg"><div class="card__video_play-btn"><svg class="icon card__video_play-btn_img">' + "<use xlink:href=\"../assets/images/icon.svg#icon_play-rounded\")</use>" + '</svg></div>';
		}
		function labnolThumbWithSrc(src) {
			return '<img class="youtube-thumb" src="'+ src+'"><div class="card__video_play-btn"><svg class="icon card__video_play-btn_img">' + "<use xlink:href=\"../assets/images/icon.svg#icon_play-rounded\")</use>" + '</svg></div>';
		}
		function showPopupVideo(obj) {
			var $popup = $('#videoPagePopup'),
				$title = $popup.find('.video-page-popup__title'),
				$container = $popup.find('.video-page-popup__container');
			$title.text(obj.title);
			$('.bg-layer').fadeIn(300);
			var topGap = $(window).scrollTop() + $(window).height() / 2 - $popup.outerHeight() / 2;
			topGap = (topGap < 0) ? '20px' : topGap;
			$popup.css({top: topGap}).fadeIn(300);

			if (obj.img === 'preview') {
				$container.empty().append(labnolThumb(obj.id));
			} else {
				$container.empty().append(labnolThumbWithSrc(obj.img))
			}
			// -todo ajax here to add info about the card
			$container.on('click', function(){
				var iframe = document.createElement("iframe");
				iframe.setAttribute("src", "http://www.youtube.com/embed/" + obj.id + "?autoplay=1&autohide=2&border=0&wmode=opaque&enablejsapi=1&controls=1&showinfo=0");
				iframe.setAttribute("frameborder", "0");
				iframe.setAttribute("id", "youtube-iframe");
				$container.find('img').remove();
				$container.find('.card__video_play-btn_img').remove();
				$container.append(iframe);
			});

		}
		function hideVideoPopup() {
			$('#videoPagePopup').find('iframe').remove();
		}
		$('#videoPagePopup .popup__close').on('click', function(){
			hideVideoPopup();
		});
		$('.bg-layer').on('click', function () {
			if ($('#videoPagePopup').length) {
				hideVideoPopup();
			}
		});
		$(document).keyup(function(e) {
			if ($('#videoPagePopup').length) {
				hideVideoPopup();
			}
		});
		// video tabs
		$('#tabsVideo').stick_in_parent();
		$('.scrollTab > a').on('click', function(){
			var addr = $(this).attr('href');
			$.scrollTo($(addr).offset().top - 70, 300);
			return false;
		});
		// replace player div with thumbnail by real iFrame with youtube player
		function labnolIframe() {
			var videoId = this.parentNode.getAttribute('data-id');

			var iframe = document.createElement("iframe");
			iframe.setAttribute("src", "http://www.youtube.com/embed/" + videoId + "?autoplay=1&autohide=2&border=0&wmode=opaque&enablejsapi=1&controls=1&showinfo=0");
			iframe.setAttribute("frameborder", "0");
			iframe.setAttribute("id", "youtube-iframe");
			this.parentNode.replaceChild(iframe, this);
		}
		$('.show-trigger-video').on('click', function(){
			// - todo ajax request for more videos
			// append to this block
			//$(this).prev('.tabs-links__content').find('.container');
			return false;
		});
		// click on suggested thumbnail -- replace player div with video from clicked thumbnail
		$('#cardTabs').on('click', '#cardsContainer .card__video__suggested_thumbnail', function () {
			var videoId = $(this).attr('data-id');
			var videoTitle = $(this).attr('data-title');

			if ($(this).hasClass('card__video__suggested_thumbnail--active')) {
				return;
			}

			var videoTitleElement = $(this).closest('.card--inner').find('a');
			videoTitleElement.text(videoTitle);

			var iframe = document.createElement("iframe");
			iframe.setAttribute("src", "http://www.youtube.com/embed/" + videoId + "?autoplay=1&autohide=2&border=0&wmode=opaque&enablejsapi=1&controls=0&showinfo=0");
			iframe.setAttribute("frameborder", "0");
			iframe.setAttribute("id", "youtube-iframe");

			$(this).closest('.card--inner').
			find('.youtube-player').
			html(iframe);

			$(this).closest('.card--inner')
			.find('.card__video__suggested_thumbnail')
			.removeClass('card__video__suggested_thumbnail--active');

			// add red border
			$(this).addClass(('card__video__suggested_thumbnail--active'));

		});

	}
};
},{}],5:[function(require,module,exports){
module.exports = {
		init: function () {
			var parentSelector = '.book-bike__center_frame-line';
			var frameNameSelector = '.book-bike__center_frame-name';
			var frameSizeSelector = '.book-bike__center_frame-size';
			var frameNameActiveClass = 'book-bike__center_frame-name--active';
			var parentElement = $(parentSelector);
			var parentTitle = '.book-bike__center_frame-title';
			var selectedBlock = '.book-bike__center_frame-selected';

			parentElement.on('click', 'label', function() {
				var colorWord = $(this).attr('data-color');
				var frameSize = $(this).closest(parentSelector).find(frameSizeSelector).text();
				var frameName = $(this).closest(parentSelector).find(frameNameSelector).text();

				// highlight active line
				$(frameNameSelector).removeClass(frameNameActiveClass);
				$(this).closest(parentSelector).find(frameNameSelector).addClass(frameNameActiveClass);


				// set new values for "Selected" line
				$(this).closest('.book-bike__center_frame').find('.current-frame-color').text(colorWord);
				$(this).closest('.book-bike__center_frame').find('.current-frame-size').text(frameSize + ', ');
				$(this).closest('.book-bike__center_frame').find('.current-frame-name').text(frameName);
				$(this).closest('.book-bike__center_frame').find(parentTitle).hide();
				$(this).closest('.book-bike__center_frame').find(selectedBlock).show();
				$('#buySmallPopupTrigger').removeClass('form-disabled').addClass('btn-red');
			});
			parentElement.find('label').on('mouseover', function(){
				var leftPos,
					topPos,
					popup = $('.book-bike__simpletip');
				var colorWord = $(this).attr('data-color');
				var frameSize = $(this).closest(parentSelector).find(frameSizeSelector).text();
				var frameName = $(this).closest(parentSelector).find(frameNameSelector).text();
				popup.find('.current-frame-color').text(colorWord);
				popup.find('.current-frame-size').text(frameSize + ', ');
				popup.find('.current-frame-name').text(frameName);
				leftPos  =  $(this).offset().left - $('.book-bike-wrapper').offset().left;
				leftPos = (Math.floor($('.book-bike__simpletip').outerWidth() +  $(this).offset().left) >= $(window).width())
					?  leftPos - $('.book-bike__simpletip').outerWidth() + 20
					: leftPos - $('.book-bike__simpletip').outerWidth()/ 2;

				topPos = $(this).offset().top - $('.book-bike-wrapper').offset().top + 18;
				popup.css({left: leftPos + 'px', top: topPos + 'px', zIndex: 20, opacity: 1});
			}).on('mouseout', function(){
				$('.book-bike__simpletip').css({opacity: 0, zIndex: 0});
			});

			}
		};
},{}],6:[function(require,module,exports){
module.exports = {
	init: function () {

		if ($('#price-slider').length) {
			(function( $ ) {

				var events = [ "create", "start", "stop", "slide", "change" ];

				$.widget( "app.slider", $.ui.slider, {

					_getCreateEventData: function() {
						return { values: this.values() };
					},

					_init: function() {
						var steps = this.options.steps;
						if ( $.isArray( steps ) ) {
							this.option( "min", 0 );
							this.option( "max", steps.length - 1 );
						}
					},

					_trigger: function( name, e, ui ) {
						var steps = this.options.steps;
						if ( !$.isArray( steps ) ) {
							return this._superApply( arguments );
						}

						if ( $.inArray( name, events ) >= 0 ) {
							return this._superApply([
								name,
								e,
								$.extend( ui, {
									stepValue: [steps[ui.values[0]], steps[ui.values[1]]]
								})
							]);
						}

						return this._superApply( arguments );
					}

				});

			})(jQuery);

			numeral.language('ru');

			var values = [15000, 18000, 22000, 27000, 30000, 50000, 75000, 125000, 150000, 270000, 350000, 600000, 750000];

			var slider = $('#price-slider').slider({
				range: true,
				steps: values,
				create: function(e, ui){
					$('#price-slider').slider('values', 0, 0);
					$('#price-slider').slider('values', 1, 4);
					$('#min_price').val(numeral(values[0]).format('0,0'));
					$('#max_price').val(numeral(values[4]).format('0,0'));
					$('#price-slider').css({opacity: 1});
				},
				slide: function(event, ui){
					$('#min_price').val(numeral(ui.stepValue[0]).format('0,0'));
					$('#max_price').val(numeral(ui.stepValue[1]).format('0,0'));
				}
			});
			/* find nearest value when scrolling */
			function findNearest(includeLeft, includeRight, value) {
				var nearest = null;
				var diff = null;
				var col = 0;
				for (var i = 0; i < values.length; i++) {
					if ((includeLeft && values[i] <= value) || (includeRight && values[i] >= value)) {
						var newDiff = Math.abs(value - values[i]);
						if (diff == null || newDiff < diff) {
							nearest = values[i];
							diff = newDiff;
							col = i
						}
					}
				}
				return col;
			}
			/* min price input */
			$('#min_price').on('keyup', function(){
				$('#price-slider').slider('values', 0, findNearest(true, true, numeral().unformat($(this).val())));

			}).on('blur', function(){
				$('#price-slider').slider('values', 0, findNearest(true, true, numeral().unformat($(this).val())));
				$(this).val(numeral($(this).val()).format('0,0'))
			});

			/* max price input */
			$('#max_price').on('keyup', function(){
				$('#price-slider').slider('values', 1, findNearest(true, true, numeral().unformat($(this).val())));

			}).on('blur', function(){
				$('#price-slider').slider('values', 1, findNearest(true, true, numeral().unformat($(this).val())));
				$(this).val(numeral($(this).val()).format('0,0'))
			});
			// price popup in catalog
			if ($('#pricePopupOuter').length) {
				$('#pricePopupOuter').on('click', function(){
					$(this).parent().find('.form__price-popup').slideDown(300);
					selectToggle($('.form__select-opened'));
					return false;
				})
			}
			$('.form__price-popup').on('click', function(){
				return false;
			});
			}
			 $('body').on('click', function(){
				$('.form__price-popup').slideUp(300);
			});
			// clear select param
			$('.form__select-clear').on('click', function(){
				clearForm($(this).parent());
				return false;
			});
			// clear all form
			$('.clear-filter').on('click', function(){
				$('.custom-select').each(function(){
					clearForm($(this));
				});
				return false;
			});
			// create custom selects from hidden select tag
			$('.custom-select').each(function(){
				var me = $(this);
				var text = '';
				me.prev('.form__hidden').find('option:not(:eq(0))').each(function(){
					var item = me.next('.form__select__popup').find('.form__select-item').eq(0).clone();
					item.find('span').text($(this).text());
					if ($(this).prop('selected')) {
						item.addClass('form__select-check-sel');
						if(!me.prev('.form__hidden').prop('multiple')) {
							me.find('span').text($(this).text())
						}
					}
					me.next('.form__select__popup').children().append(item);

				});
				if (me.prev('.form__hidden').prop('multiple')) {
					text = me.find('span').text();
					console.log(text);
					me.find('span').text(text.split(' ')[0] + ' (' + me.prev('.form__hidden').find('option:selected').length + ')');
				}
				// remove first template markup
				me.next('.form__select__popup').find('.form__select-item').eq(0).remove();
				if ($(this).next('.form__select__popup').find('.form__select-check-sel').length)
					me.addClass('form__select--choosen');
			});
			/* form selects */
			$('.custom-select').on('click', function(){
				selectToggle($('.form__select-opened').not($(this)));
				selectToggle($(this));
				if ($('.form__price-popup').length) {
					$('.form__price-popup').slideUp(300);
				}
				return false;
			});
			// show - hide selects
			function selectToggle(select) {
				select.next('.form__select__popup').slideToggle(250);

				select.toggleClass('form__select-opened');

				//remove choosen class when opening the select
				if (select.hasClass('form__select-opened')) {
					select.removeClass('form__select--choosen');
				} else {
					if (!select.next('.form__select__popup').find('.form__select-check-sel').length)
						select.removeClass('form__select--choosen');
					else
						select.addClass('form__select--choosen');
				}
			}
			// clear form
			function clearForm(elem) {
				elem.removeClass('form__select--choosen');
				elem.next('.form__select__popup').find('.form__select-check-sel').removeClass('form__select-check-sel');
				elem.prev('.form__hidden').find('option').prop('selected', false);
				elem.prev('.form__hidden').val(0);
				elem.find('span').text(elem.prev('.form__hidden').find('option').eq(0).text());
				return false;
			}
			$('.form__select-item').on('click', function(){
				// index of this elem
				var index = $(this).parent().find('.form__select-item').index($(this)) + 1;
				var select = $(this).closest('.form__select-outer').find('.form__hidden');
				var customSelect = $(this).closest('.form__select__popup').prev('.custom-select');
				var text = '';
				if (!select.prop('multiple')) {
					$(this).parent().find('.form__select-item').removeClass('form__select-check-sel');
					select.find('option').prop('selected', $(this).hasClass('form__select-check-sel'));
					$(this).closest('.form__select__popup').slideUp(250);
					customSelect.find('span').text($(this).text());
					customSelect.removeClass('form__select-opened');
					customSelect.toggleClass('form__select--choosen', $(this).closest('.form__select__popup').find('.form__select-check-sel').length);
				}
				$(this).toggleClass('form__select-check-sel');
				select.find('option').eq(index).prop('selected', $(this).hasClass('form__select-check-sel'));
				select.trigger('change');
				if (select.prop('multiple')) {
					text = customSelect.find('span').text();
					customSelect.find('span').text(text.split(' ')[0] + ' (' + $(this).parent().find('.form__select-check-sel').length + ')');
				}
				return false;
			});
			$('body').on('click', function(){
				$('.form__select-opened').each(function(){
					selectToggle($(this));
				});
			});
			// filter on catalog page - show more click
			$('#show-more').on('click', function(){
				if ($(this).parent().find('.form-fields__shown').length) {
					$(this).find('.form__widesearch__minus').hide();
					$(this).find('.form__widesearch__plus').show();
					$(this).find('span').show();
					$(this).parent().find('.form-fields__shown').removeClass('form-fields__shown').addClass('form-fields__hidden').fadeIn(300);
				} else {
					$(this).find('.form__widesearch__minus').show();
					$(this).find('.form__widesearch__plus').hide();
					$(this).find('span').hide();
					$(this).parent().find('.form-fields__hidden').removeClass('form-fields__hidden').addClass('form-fields__shown').fadeIn(300);
					$('.catalog-filter__inner').css({display: 'inline'});
					$(this).css({marginLeft: 0});
				}
				return false;
			});
			if ($('.price-mask').length)
				$('.price-mask').inputmask({"mask": "+9 (999) 9999999"})

	}
};
},{}],7:[function(require,module,exports){
module.exports = {
	init: function () {
		$('.offline-shop-trigger').click(function () {
			toggleActiveClass($(this).closest('.book-bike-wrapper').find('.book-bike__top'), $(this));
			showOnlineShop($(this));
		});


		$('.eshop-shop-trigger').click(function () {
			toggleActiveClass($(this).closest('.book-bike-wrapper').find('.book-bike__top'), $(this));
			showOfflineShop($(this));
		});
		var showOfflineShop = function (elem) {
			elem.closest('.book-bike-wrapper').find('.eshop-form').show();
			elem.closest('.book-bike-wrapper').find('.real-shop-form').hide();
		};
		var showOnlineShop = function (elem) {
			elem.closest('.book-bike-wrapper').find('.eshop-form').hide();
			elem.closest('.book-bike-wrapper').find('.real-shop-form').show();
		};

		/**
		 * @param elementsArray array with jQuery elements (two tabs in this case)
		 * @param tabElement jQuery element that needs an .active class
		 */
		var toggleActiveClass = function (elementsArray, tabElement) {
			var activeClass = 'book-bike__top--active';

			elementsArray.removeClass(activeClass);
			tabElement.addClass(activeClass);
		}
	}
};
},{}],8:[function(require,module,exports){
module.exports = {
	init: function () {
		this.tabletMenuOpened = false;
		// toggle tablet dropdown menu
		$('#tablet-hamburger-btn').click(function () {
			this.tabletMenuOpened = !this.tabletMenuOpened;
			$('#navbar-menu').slideToggle();
			// $('#tablet-hamburger-btn').toggleClass('navbar__tablet-menu-toggle--active');
			$('#tablet-hamburger-btn').toggleClass('navbar__tablet-menu-toggle--active');
			if (this.tabletMenuOpened) {
				//$('#tablet-hamburger-btn').find('svg').html('<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="../assets/images/icon.svg#icon_cross"></use>');
				$('.hamburger-normal').toggle();
				$('.hamburger-close').toggle();
			}
			else {
				//$('#tablet-hamburger-btn').find('svg').html('<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="../assets/images/icon.svg#icon_hamburger"></use>');
				$('.hamburger-normal').toggle();
				$('.hamburger-close').toggle();
			}
			return false;
		});

		// toggle search field on tablets and small desktops
		$('#navbar__search-btn').click(function () {
			alert('Search button pressed!');
		});

		// toggle somwthing else
		$('.menu-mobile__item--main-category').click(function () {
			$(this).find('ul').slideToggle();
		});
	}
};

},{}],9:[function(require,module,exports){
module.exports = {
	init: function () {
		// popup in menu
		// question mark click - show tip popup
		$('.main_list__question').on('click', function () {
			var parent = $(this).closest('.main_list__item'),
				popup = null,
				question = $(this),
				widthValue = question.offset().left - parent.offset().left;
			// if list is on page
			var popupInPage = $(this).closest('#mainList').length;
			if (popupInPage) {
				popup = parent.find('.main-list__popup');
			} else {
				popup = $(this).closest('.navbar-big__popup').find('.navbar-big__descr');
			}
			if (parent.hasClass('main_list__item_sel')) {
				if (popupInPage) {
					parent.removeClass('main_list__item_sel');
				}
			} else {
				parent.parent().find('.main_list__item_sel').removeClass('main_list__item_sel');
				parent.addClass('main_list__item_sel');
				if (popupInPage) {
					// check if popup fits in the window
					if (popup.outerWidth() + parseInt(question.offset().left) > $('body').width() - 30) {
						// float to the right side
						popup.css({left: widthValue + question.width() - popup.outerWidth()});
					} else {
						// float to the left side
						popup.css({left: widthValue});
					}
				} else {

					// todo - ajax request
					// $('#popupList .navbar-big__descr') - append data to this div
					popup.show();
				}
			}
			return false;
		});
		// close popups on body click
		$('body').on('click', function () {
			$('#mainList').find('.main_list__item_sel').removeClass('main_list__item_sel');
		});
		$('#mainList .main-list__popup').on('click', function () {
			return false;
		});
		// tip popup hide
		$('.main-list__close').on('click', function () {
			var parent = $(this).closest('.main_list__item');
			parent.removeClass('main_list__item_sel');
		});
		// video player for main video
		function videoPlayer(id, trigger) {
			var me = this;
			this.videoPlay = null;
			// create player
			this.create = function () {
				$('#' + id).append('<source src="' + trigger.data('url') + '.mp4" type="video/mp4">');
				$('#' + id).append('<source src="' + trigger.data('url') + '.webm" type="video/webm">');
				me.videoPlay = videojs(id, {
					width: 740,
					height: 500,
					autoplay: true,
					preload: false,
					controls: true
				}, function () {

				});
			};
			this.stop = function () {
				if (me.videoPlay)
					me.videoPlay.pause();
			}
		}

		function videoCall(block, trigger) {
			var video = new videoPlayer(block, trigger);
			trigger.on('click', function () {
				$('.bg-layer').fadeIn(300);
				$('#videoPopup').fadeIn(300);
				video.create();
				return false;
			});
			$('#videoPopupClose').on('click', function () {
				$('#videoPopup').fadeOut(300);
				$('.bg-layer').fadeOut(300);
				video.stop();
				return false;
			});
			$('#videoPopup').on('click', function (e) {
				e.stopPropagation();
			});
			$('body').on('click', function () {
				if ($('#videoPopup').is(':visible')) {
					$('#videoPopup').fadeOut(300);
					$('.bg-layer').fadeOut(300);
					video.stop();
				}
			});
		}

		if ($('#player_trigger').length)
			videoCall('aboutVideo', $('#player_trigger'));
		if ($('#videoCardCall').length)
			videoCall('aboutVideo', $('#videoCardCall'));


		var time = null;
		// show wide view on card click
		$('body').on({
				mouseenter: function () {
					var me = $(this);
					$(this).find('.card__review').show();
					time = setTimeout(function () {
						me.find('.card__review').fadeOut(300);
					}, 2000);

				},
				mouseleave: function () {
					clearTimeout(time);
					$(this).find('.card__review').addClass('card__review-show').hide();
				}
			}, '.card--simple:not(".card-vertical")'
		);
		$('body').on(
			{
				mouseenter: function () {
					$(this).closest('.card').find('.card__review')
						.addClass('card__review-show').show();
					clearTimeout(time);
					$(this).find('.card__review_text').addClass('card__review_text-hover');
					return false;
				},
				mouseleave: function () {
					$(this).closest('.card').find('.card__review').hide();
					$(this).find('.card__review_text').removeClass('card__review_text-hover');
				}
			}, '.card__reviews-hover'
		);

		// color choosing
		$('body').on({
			click: function () {
				$(this).closest('.card_photo-vars').find('.card_photo-vars__item-sel').removeClass('card_photo-vars__item-sel');
				$(this).addClass('card_photo-vars__item-sel');
				$(this).closest('.card_photo').find('.card_photo-pic').prop('src', $(this).prop('href'));
				return false;
			}
		}, '.card_photo-vars__item');

		// show buy popup
		$('body').on({
			click: function () {
				$('.bg-layer').fadeIn(300);
				var popup = $('#buyPopup');
				popup.css({
					display: 'block',
					visibility: 'hidden',
					top: $(window).scrollTop() + $(window).height() / 2 - $('#buyPopup').outerHeight() / 2
				});
				if ($('#videoPagePopup').length) {
					$('#videoPagePopup').find('iframe').remove();
					$('#videoPagePopup').fadeOut(300);
				}
				popup.css({display: 'none', visibility: 'visible'});
				popup.fadeIn(300, function () {
					if (!popup.find('.slick-slider').length) {
						var buyGallery = require('../card/bigCardGallery');
						buyGallery.init();
					}
				});
				return false;
			}
		}, '.card--simple .form-control');
		// close popup
		$('.popup__close').on('click', function () {
			$(this).parent().fadeOut(300);
			$('.bg-layer').fadeOut(300);
		});
		$('.g-popup').not("#cityPopup").on('click', function (e) {
			e.stopPropagation();
		});
		$(document).keyup(function(e) {
			if (e.keyCode == 27) {
				if ($('.g-popup:visible').length || $('.popup:visible').length) {
					$('.bg-layer').fadeOut(300);
					$('.popup, .g-popup').fadeOut(300);
				}
			}
		});
		$('.bg-layer').on('click', function () {
			$('.bg-layer').fadeOut(300);
			$('.popup, .g-popup').fadeOut(300);
		});
		// show small popup
		function smallPopupShow(id) {
			$('.bg-layer').fadeIn(300);
			var topGap = $(window).scrollTop() + $(window).height() / 2 - $('#' + id).outerHeight() / 2;
			topGap = (topGap < 0) ? '20px' : topGap;
			$('#' + id).css({top: topGap}).fadeIn(300);
		}
		// small buy popup in card
		if ($('#buySmallPopupTrigger').length) {
			$('body').on({
				click: function () {
					smallPopupShow('buySmallPopup');
						// todo - ajax request - put to the basket, append goodie info
					return false;
				}
			}, '#buySmallPopupTrigger');
		}
		// 1 click popup
		if ($('.buyOneClickTrigger').length) {
			$('body').on({
				click: function () {
					smallPopupShow('oneClickPopup');
					// todo - ajax request - append goodie info
					return false;
				}
			}, '.buyOneClickTrigger');
		}
		// credit popup
		if ($('#creditPopupTrigger').length) {
			$('body').on({
				click: function () {
					smallPopupShow('creditPopup');
					// todo - credit popup, append goodie info
					return false;
				}
			}, '#creditPopupTrigger');
		}
		// preorder popup
		if ($('#preorderTrigger').length) {
			$('body').on({
				click: function () {
					smallPopupShow('preorderPopup');
					// todo - preorder popup, append goodie info
					return false;
				}
			}, '#preorderTrigger');
		}
		// autocomplete in city popup
		if ($('#cityPopupTrigger').length) {
			$('body').on({
				click: function () {
					smallPopupShow('cityPopup');
					$('#chooseCity').trigger('focus').select();
					return false;
				}
			}, '#cityPopupTrigger');

			$.widget( "custom.catcomplete", $.ui.autocomplete, {
				_create: function() {
					this._super();
					this.widget().menu( "option", "items", "> :not(.ui-autocomplete-category)" );
				},
				_renderItem: function(ul, item) {
					return $( "<li>" )
						.append( item.label + '&nbsp;<span class="ui-menu-region">' + item.region + '</span>')
						.appendTo( ul );
				}
			});
			if ($('#chooseCity').length) {
				$('#chooseCity').catcomplete({
					// the source
					source: function(request, response){
						// data format: delete this statement
						var data = [
							{label: "Москва", region: "", value: ''},
							{label: "Мосальск", region: "Калужская область", value: ''},
							{label: "Калуга", region: "Калужская область", value: ''},
							{label: "Красноярск", region: "Красноярский край", value: ''},
							{label: "Климовск", region: "Калужская обл.", value: ''}];
						response(data);
						return false;
						// todo - ajax request
						jQuery.get("/", {
							query: request.term
						}, function (data) {
							response(data);
						});
					},
					appendTo: '#cityPopup',
					minLength: 3,
					select: function(event, ui){
						$('#cityPopup').fadeOut(300);
						$('.bg-layer').fadeOut(300);
						$('#deliveryDetails').show();
						$('#freeDelivery').hide();
						$('#cityPopupTrigger').addClass('noborder').html('Город: <strong class="border-style">' + ui.item.label + '</strong>')
					}
				})
			}
			if($('#showSocials').length) {
				$('#showSocials').on('click', function(){
					$('#socialsPopup').fadeIn(300);
					return false;
				});
			}

		}
	}
};
},{"../card/bigCardGallery":3}],10:[function(require,module,exports){
module.exports = {
	init: function () {
		// slide bikes in the recommended block (when bike is missing on the product page)
		$('.bike-missing .book-bike__center').slick({
			slidesToShow: 3,
			slidesToScroll: 1,
			vertical: true,
			infinite: true,
			dots: false,
			arrows: true,
			draggable: false,
			// autoplay: true,
			// autoplaySpeed: 3000,
			pauseOnHover: true,
			prevArrow: $('#bike-missing_prev'),
			nextArrow: $('#bike-missing_next')
		});
	}
};


},{}],11:[function(require,module,exports){
module.exports = {
	init: function () {
		$('.compare-slider').css({opacity: 1});
		// heights
		function compareheight() {
			$('.compare-table__list').eq(0).find('li').each(function(){
				var number = $(this).closest('.compare-table__list').find('li').index($(this));

				var height = $(this).outerHeight();

				$('.compare-table__list').not($(this).parent()).each(function(){
					if($(this).find('li').eq(number).outerHeight() >= height) {
						height = $(this).find('li').eq(number).outerHeight();
					}
				});
				$('.compare-table__list').each(function(){
					$(this).find('li').eq(number).height(height - 10);
				})
			});
		}

		compareheight();

		$('.compare-table__list li').on('mouseover', function(){
			var number = $(this).closest('.compare-table__list').find('li').index($(this));
			$('.compare-table__list').each(function(){
				$(this).find('li').eq(number).addClass('compare-table__list-hover');
			})
		}).on('mouseout', function(){
			var number = $(this).closest('.compare-table__list').find('li').index($(this));
			$('.compare-table__list').each(function(){
				$(this).find('li').eq(number).removeClass('compare-table__list-hover');
			})
		});
		// stick head
		$('#compareHeader').stick_in_parent().on("sticky_kit:bottom", function(e) {
			$(e.target).removeClass('compare-table--body-g').addClass('compare-table--body-no');
		}).on("sticky_kit:unbottom", function(e) {
			$(e.target).addClass('compare-table--body-g').removeClass('compare-table--body-no');
		}).on("sticky_kit:unstick", function(e) {
			$(e.target).removeClass('compare-table--body-g').addClass('compare-table--body-no');
		}).on("sticky_kit:stick", function(e) {
			$(e.target).addClass('compare-table--body-g').removeClass('compare-table--body-no');
		});

		// sidebar and buttons stick
		$('#sidebar2').stick_in_parent();

		$('#compareRight').stick_in_parent({offset_top: 50 });
		$('#compareLeft').stick_in_parent({offset_top: 50});

		$('#compareOverall').on('scroll', function(){
			if($('#compareHeader').css('position') === 'fixed') {
				$('#compareHeader').css({left: -$(this).scrollLeft()});
			}
		});
		// buttons click
		$('#compareRight').on('click', function(){
			$('#compareOverall').animate({scrollLeft: $('#compareOverall').scrollLeft() + 300}, 300)
		});
		$('#compareLeft').on('click', function(){
			$('#compareOverall').animate({scrollLeft: $('#compareOverall').scrollLeft() - 300}, 300)
		});
		$('body').on('mousemove', function(e){
			if (e.pageX > $(window).width()/2) {
				$('#compareRight').css({opacity: 1});
				$('#compareLeft').css({opacity: 0});
			} else {
				$('#compareRight').css({opacity: 0});
				$('#compareLeft').css({opacity: 1});
			}
		});
		// filter head
		$('.compare-table__filter a').on('click', function(){
			$('.compare-table__filter').find('.compare-table__filter--sel').removeClass('compare-table__filter--sel');
			$(this).parent().addClass('compare-table__filter--sel');
			// todo ajax show filtered params
			$.ajax({method: 'GET', data:''}, function(data){
				$('#compareTable').empty();
			});

			return false;
		});

	}
};
},{}],12:[function(require,module,exports){
module.exports = {
	init: function () {
		// slide statistics in the chocolate block
		$('.main-slider').slick({
			slidesToShow: 1,
			slidesToScroll: 1,
			infinite: true,
			dots: true,
			arrows: true,
			autoplay: true,
			autoplaySpeed: 3000,
			pauseOnHover: true,
			prevArrow: $('#bannerLeft'),
			nextArrow: $('#bannerRight')
		});
	}
};
},{}],13:[function(require,module,exports){
module.exports = {
	init: function () {
		function initSlider() {
			// slide bicycles
			$('#products').on('init', function(){
				$('#products').css({opacity: 1});

			}).on('beforeChange', function(event, slick, currentSlide, nextSlide){
				$('#products').find('.products__item').find('.products__item-info').hide();

			}).on('afterChange', function(event, slick, currentSlide, nextSlide){
				$('#products').find('.products__item').not('.slick-center').find('.products__item-info').hide();
				$('#products').find('.slick-center .products__item-info').fadeIn(300);

			});
			$('#products').slick({
				centerMode: true,
				centerPadding: 0,
				slidesToScroll: 1,
				variableWidth: true,
				arrows: true,
				speed: 400,
				prevArrow: $('#productsLeft'),
				nextArrow: $('#productsRight'),
				correction: ($('#products').data('correction') !== undefined) ? $('#products').data('correction') : 85,
				infinite: true,
				initialSlide: 1,
				responsive: [
					{
						breakpoint: 768,
						settings: {
							slidesToShow: 1,
							slidesToScroll: 1,
							arrows: false,
							centerPadding: 0,
							variableWidth: false,
							correction: 0
						}
					}
				]
			});
		}
		initSlider();
		$.get('/catalog/similar/', function(response) {
			$('#same').html(response);
			initSlider();
		});


	}
};
},{}],14:[function(require,module,exports){
module.exports = {
	init: function () {
		// slide bicycles
		$('#card-video-slider').slick({
			centerPadding: 0,
			slidesToScroll: 1,
			variableWidth: true,
			arrows: true,
			speed: 300,
			slidesToShow: 3,
			prevArrow: $('#card-video-slider-prev'),
			nextArrow: $('#card-video-slider-next')
		});
	}
};
},{}],15:[function(require,module,exports){
module.exports = {
	init: function () {
		var videos = require('../card/videos');
		var cardsBlock = {
			allBlock: $('#cardsContainer'),
			loadContent: function(id, action){
				var url = (id == 'video') ? 'video': 'load';
				// todo - ajax request to append data to the tab
				$.ajax({
					method: "GET",
					url: "/assets/scripts/" + url + ".php",
					data: { id: id }
				})
				.done(function( data ) {
					// if we load new cards and remove old
					if (action === 'load')
						$('.cards .card').remove();
					$('.cards').append(data);
					setTimeout(function(){
						$('.cards .card').removeClass('card--loading');
						if (id === 'video') {
							videos.init();
						}
					});

				});
			},
			loadTab: function(tab){
				this.allBlock = $('#cardsContainer');
				var selectedTab =  tab.closest('.tabs__points').find('.tabs__points__item--sel');
				//don't click current tab
				if (tab.hasClass('tabs__points__item--sel')) {
					return false;
				}

				selectedTab.removeClass('tabs__points__item--sel');
				tab.addClass('tabs__points__item--sel');

				this.loadContent(tab.find('a').data('id'), 'load');

				this.currentTabId = tab.find('a').data('id');

				return false;
			},
			currentTabId: null,
			init: function(){
				var me = this;

				$('#cardTabs .tabs__points__item a').on('click', function(){
					$.scrollTo($('.cards').offset().top - $('#tabPoints').outerHeight() - 30, 300);
					me.loadTab($(this).parent());
					return false;
				});

				$('#showMore').on('click', function(){
					me.loadContent(me.currentTabId, 'add');
					$("#tabPoints").trigger("sticky_kit:detach");
					$('#tabPoints').stick_in_parent();
					return false;
				});
			}
		};
		// tabs on main page
		if ($('#tabPoints').length) {
			cardsBlock.init();
			$('#tabPoints').stick_in_parent();
		}
		// tabs on inner page
		$('#innerPoints').stick_in_parent();
		$('#innerPoints .tabs__points__item a').on('click', function(){
			var parent = $('#innerPoints').parent();
			var pointTop = 0;
			if (!!$(this).data('scroll')) {
				$.scrollTo($('#' + $(this).data('id')).offset().top - 132, 300)
			}
			else {
				parent.find('.tabs__content').removeClass('tabs__content--shown');
				$('#' + $(this).data('id')).addClass('tabs__content--shown');
				pointTop = $('#' + $(this).data('id')).offset().top - $('#innerPoints').outerHeight() -20;
				if ($(window).scrollTop() > pointTop) {
					$.scrollTo(pointTop, 300);
				}

			}
			parent.find('.tabs__points__item--sel').removeClass('tabs__points__item--sel');
			$(this).parent().addClass('tabs__points__item--sel');
			return false;

		})
	}
};
},{"../card/videos":4}],16:[function(require,module,exports){
module.exports = {
	init: function () {
		(function($){
			$.fn.resizeDots = function(options){
				var defaults = { width: 674, height: 400},
					newWidth, k, me;

				me = this;

				function findNewKoef(){
					newWidth = me.width();
					k = newWidth/defaults.width;
					me.height(defaults.height*k);
				}

				function recalculate() {
					me.find('.hotspot').each(function(){
						var top = parseInt($(this).data('top')),
							left = parseInt($(this).data('left'));

						$(this).css({top: top*k + 'px'});
					});

				}
				// init
				me.find('.hotspot').each(function(){
					$(this).data({left: $(this).css('left'), top: $(this).css('top') });
				});
				findNewKoef();
				recalculate();

				$(window).on('resize', function(){
					findNewKoef();
					recalculate();
				});
				return this;
			};
			$.fn.velotabs = function(options){
				var defaults = { className: 'tabs-switcher__selected'}, settings = {};
				var me = this;
				$.extend(settings, defaults, options);
				function changeTab(elem) {
					var id = elem.data('id');
					var topPos = $('#hotspots').offset().top + $('#hotspots').outerHeight()/2;
					me.find('.tabs-switcher__container').hide();
					me.find('.' + settings.className).toggleClass(settings.className);
					elem.parent().addClass(settings.className);
					$('#' + id).show();
					if ($(window).scrollTop() > topPos) {
						$.scrollTo(topPos, 300);
					}
				}
				function changeHotSpot(id){
					$('#hotspots .hotspot-sel').removeClass('hotspot-sel');
					if ($('#' + id).length) {
						$('#' + id).addClass('hotspot-sel');
					}
				}

				return this.each(function(){
					$(this).find('.tabs-switcher__item a').on('click', function(){
						changeTab($(this));
						changeHotSpot('hotspot_' + $(this).data('id'));
						return false;
					});
					$(this).find('.hotspot').on('click', function(){
						var id = $(this).data('id');
						changeTab(me.find('.tabs-switcher__item a[data-id="' + id + '"]'));
						changeHotSpot($(this).attr('id'));
						return false;
					})
				})
			};
		})($);
		$('#hotspots').resizeDots();
		$('#velomasterTabs').velotabs({className: 'tabs-switcher__selected'});
		$('#tabs').stick_in_parent();
		$('#sidebar').stick_in_parent({offset_top: 80});
	}
};
},{}]},{},[1])
//# sourceMappingURL=data:application/json;charset:utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJhcHAvc2NyaXB0cy9hcHAuanMiLCJhcHAvc2NyaXB0cy9iYXNrZXQvYmFza2V0LmpzIiwiYXBwL3NjcmlwdHMvY2FyZC9iaWdDYXJkR2FsbGVyeS5qcyIsImFwcC9zY3JpcHRzL2NhcmQvdmlkZW9zLmpzIiwiYXBwL3NjcmlwdHMvZm9ybXMvY29sb3JDaG9vc2VyLmpzIiwiYXBwL3NjcmlwdHMvZm9ybXMvZm9ybXMuanMiLCJhcHAvc2NyaXB0cy9mb3Jtcy9zd2l0Y2hTaG9wRm9ybS5qcyIsImFwcC9zY3JpcHRzL25hdmJhci90b2dnbGVzLmpzIiwiYXBwL3NjcmlwdHMvcG9wdXAvcG9wdXAuanMiLCJhcHAvc2NyaXB0cy9zbGlkZXJzL2Jpa2VNaXNzaW5nLmpzIiwiYXBwL3NjcmlwdHMvc2xpZGVycy9jb21wYXJlLmpzIiwiYXBwL3NjcmlwdHMvc2xpZGVycy9pbmRleE1haW5CYW5uZXIuanMiLCJhcHAvc2NyaXB0cy9zbGlkZXJzL2luZGV4UHJvZHVjdHMuanMiLCJhcHAvc2NyaXB0cy9zbGlkZXJzL3ZpZGVvU2xpZGVyLmpzIiwiYXBwL3NjcmlwdHMvdGFicy90YWJzLmpzIiwiYXBwL3NjcmlwdHMvdmVsb21hc3Rlci92ZWxvbWFzdGVyLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDekdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDcklBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3REQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDL0lBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNsREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDMU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNoQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDakNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDaFRBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNwQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNyRkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNoQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2xEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDZEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDMUZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwidmFyIHNsaWRlcnMgPSBbXG5cdHJlcXVpcmUoJy4vc2xpZGVycy9pbmRleFByb2R1Y3RzJyksXG5cdHJlcXVpcmUoJy4vc2xpZGVycy9pbmRleE1haW5CYW5uZXInKSxcblx0cmVxdWlyZSgnLi9zbGlkZXJzL3ZpZGVvU2xpZGVyJyksXG5cdHJlcXVpcmUoJy4vc2xpZGVycy9iaWtlTWlzc2luZycpLFxuXHRyZXF1aXJlKCcuL3NsaWRlcnMvY29tcGFyZScpXG5dO1xuXG52YXIgdG9nZ2xlcyA9IHJlcXVpcmUoJy4vbmF2YmFyL3RvZ2dsZXMnKTtcbnZhciBwb3B1cHMgPSByZXF1aXJlKCcuL3BvcHVwL3BvcHVwJyk7XG52YXIgZm9ybXMgPSByZXF1aXJlKCcuL2Zvcm1zL2Zvcm1zJyk7XG52YXIgdmlkZW9zID0gcmVxdWlyZSgnLi9jYXJkL3ZpZGVvcycpO1xudmFyIHRhYnMgPSByZXF1aXJlKCcuL3RhYnMvdGFicycpO1xudmFyIHN3aXRjaFNob3BGb3JtID0gcmVxdWlyZSgnLi9mb3Jtcy9zd2l0Y2hTaG9wRm9ybScpO1xudmFyIGJpZ0NhcmRHYWxsZXJ5ID0gcmVxdWlyZSgnLi9jYXJkL2JpZ0NhcmRHYWxsZXJ5Jyk7XG52YXIgY29sb3JDaG9vc2VyID0gcmVxdWlyZSgnLi9mb3Jtcy9jb2xvckNob29zZXInKTtcbnZhciBiYXNrZXQgPSByZXF1aXJlKCcuL2Jhc2tldC9iYXNrZXQnKTtcbnZhciB2ZWxvbWFzdGVyID0gcmVxdWlyZSgnLi92ZWxvbWFzdGVyL3ZlbG9tYXN0ZXInKTtcbiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uICgpIHtcblx0Ly8gbG9vcCB0aHJvdWdoIHRoZSBzbGlkZXJzIGFuZCBpbml0aWFsaXplIHRoZW1cblx0c2xpZGVycy5tYXAoZnVuY3Rpb24gKHNsaWRlcikge1xuXHRcdHNsaWRlci5pbml0KCk7XG5cdH0pO1xuXHR0b2dnbGVzLmluaXQoKTtcblx0cG9wdXBzLmluaXQoKTtcblx0Zm9ybXMuaW5pdCgpO1xuXHR2aWRlb3MuaW5pdCgpO1xuXHR0YWJzLmluaXQoKTtcblx0c3dpdGNoU2hvcEZvcm0uaW5pdCgpO1xuXHRiaWdDYXJkR2FsbGVyeS5pbml0KCk7XG5cdGNvbG9yQ2hvb3Nlci5pbml0KCk7XG5cdGJhc2tldC5pbml0KCk7XG5cdHZlbG9tYXN0ZXIuaW5pdCgpO1xuXG5cdCQoJyNicmFuZHNUcmlnZ2VyJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG5cdFx0JCh0aGlzKS5wYXJlbnQoKS50b2dnbGVDbGFzcygnYnJhbmRzLS1mdWxsJyk7XG5cdFx0JCh0aGlzKS50b2dnbGVDbGFzcygnYnJhbmRzX190cmlnZ2VyLWlubmVyLXJvdGF0ZScpO1xuXHR9KTtcblxuXHQkKCcjcG9wdXBsYXJNb3JlJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG5cdFx0JCgnLnBvcHVsYXItbGlua3NfX2l0ZW0tLWdyb3VwJykucmVtb3ZlQ2xhc3MoJ3BvcHVsYXItbGlua3NfX2l0ZW0tLWdyb3VwLWhpZGRlbicpO1xuXHRcdCQodGhpcykuaGlkZSgpO1xuXHRcdHJldHVybiBmYWxzZTtcblx0fSk7XG5cblx0Ly8gc2hvdyBwcm9kdWN0IHBvcHVwIHJldmlldyBhZnRlciAxIHNlY29uZFxuXHRzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuXHRcdCQoJyNwcm9kdWN0LXBvcHVwJykudG9nZ2xlQ2xhc3MoJ3Byb2R1Y3QtcGFnZS1wb3B1cC0tdmlzaWJsZScpO1xuXHR9LCAxMDAwKTtcblx0dmFyIHByb2R1Y3QgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuXHRcdCQoJyNwcm9kdWN0LXBvcHVwJykucmVtb3ZlQ2xhc3MoJ3Byb2R1Y3QtcGFnZS1wb3B1cC0tdmlzaWJsZScpO1xuXHR9LCAyMTAwMCk7XG5cdCQoJy5wcm9kdWN0LXBhZ2UtcG9wdXAtd3JhcHBlcicpLm9uKCdjbGljaycsICcucHJvZHVjdC1wYWdlLXBvcHVwX190b3BfY2xvc2UtY3Jvc3MnLCBmdW5jdGlvbigpIHtcblx0XHQkKHRoaXMpLmNsb3Nlc3QoJy5wcm9kdWN0LXBhZ2UtcG9wdXAtd3JhcHBlcicpLnRvZ2dsZUNsYXNzKCdwcm9kdWN0LXBhZ2UtcG9wdXAtLXZpc2libGUnKTtcblx0XHRjbGVhclRpbWVvdXQocHJvZHVjdClcblx0fSk7XG5cblx0dmFyIGJyYW5kcyA9IHtcblx0XHRzaG93QnJhbmRzOiBmdW5jdGlvbigpe1xuXHRcdFx0dmFyIG1lID0gdGhpcztcblx0XHRcdHZhciBicmFuZHNMaXN0ID0gbWUuYnJhbmRzLmZpbmQoJy5icmFuZHMtbGlzdCcpO1xuXHRcdFx0bWUuYnJhbmRzLmZpbmQoJy5icmFuZHMtbGlzdC1zaG93LWFsbCcpLnRleHQoJ9Ch0LrRgNGL0YLRjCDQstGB0LUnKTtcblx0XHRcdGJyYW5kc0xpc3QuYW5pbWF0ZSh7bWF4SGVpZ2h0OiAnMjAwcHgnfSwgMzAwKTtcblx0XHRcdG1lLmJyYW5kcy5hZGRDbGFzcygnYnJhbmRzLWxpc3QtLW91dGVyLXNob3cnKTtcblx0XHRcdGJyYW5kc0xpc3QuYWRkQ2xhc3MoJ2JyYW5kcy1saXN0LS1zaG93bicpO1xuXHRcdH0sXG5cdFx0aGlkZUJyYW5kczogZnVuY3Rpb24oKXtcblx0XHRcdHZhciBtZSA9IHRoaXM7XG5cdFx0XHR2YXIgYnJhbmRzTGlzdCA9IG1lLmJyYW5kcy5maW5kKCcuYnJhbmRzLWxpc3QnKTtcblx0XHRcdG1lLmJyYW5kcy5maW5kKCcuYnJhbmRzLWxpc3Qtc2hvdy1hbGwnKS50ZXh0KCfQn9C+0LrQsNC30LDRgtGMINCy0YHQtScpO1xuXHRcdFx0YnJhbmRzTGlzdC5hbmltYXRlKHttYXhIZWlnaHQ6ICc1MHB4J30sIDMwMCwgZnVuY3Rpb24oKXtcblx0XHRcdFx0bWUuYnJhbmRzLnJlbW92ZUNsYXNzKCdicmFuZHMtbGlzdC0tb3V0ZXItc2hvdycpO1xuXHRcdFx0XHRicmFuZHNMaXN0LnJlbW92ZUNsYXNzKCdicmFuZHMtbGlzdC0tc2hvd24nKTtcblx0XHRcdH0pO1xuXHRcdH0sXG5cdFx0YnJhbmRzOiAkKCcjYnJhbmRzQmxvY2snKSxcblx0XHRpbml0OiBmdW5jdGlvbigpe1xuXHRcdFx0dmFyIG1lID0gdGhpcztcblx0XHRcdCQoJy5icmFuZHMtbGlzdC0tY2xvc2UnKS5vbignY2xpY2snLCBmdW5jdGlvbigpe1xuXHRcdFx0XHRtZS5oaWRlQnJhbmRzKCk7XG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH0pO1xuXHRcdFx0JCgnLmJyYW5kcy1saXN0LXNob3ctYWxsJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKXtcblx0XHRcdFx0aWYgKG1lLmJyYW5kcy5oYXNDbGFzcygnYnJhbmRzLWxpc3QtLW91dGVyLXNob3cnKSlcblx0XHRcdFx0XHRtZS5oaWRlQnJhbmRzKCk7XG5cdFx0XHRcdGVsc2Vcblx0XHRcdFx0XHRtZS5zaG93QnJhbmRzKCk7XG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH0pO1xuXHRcdFx0bWUuYnJhbmRzLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpe1xuXHRcdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xuXHRcdFx0fSk7XG5cdFx0XHQkKCdib2R5Jykub24oJ2NsaWNrJywgZnVuY3Rpb24oKXtcblx0XHRcdFx0bWUuaGlkZUJyYW5kcygpO1xuXHRcdFx0fSlcblxuXHRcdH1cblx0fTtcblx0aWYgKCQoJyNicmFuZHNCbG9jaycpLmxlbmd0aClcblx0XHRicmFuZHMuaW5pdCgpO1xuXG5cblxuXG59KTtcbiIsIm1vZHVsZS5leHBvcnRzID0ge1xuXHRpbml0OiBmdW5jdGlvbiAoKSB7XG5cdFx0bnVtZXJhbC5sYW5ndWFnZSgncnUnKTtcblx0XHQvLyBpbmNyZWFzZSBjb2xcblx0XHQkKCcuYmFza2V0X19pbmNyZWFzZScpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCl7XG5cdFx0XHR2YXIgY29sID0gcGFyc2VJbnQoJCh0aGlzKS5wYXJlbnQoKS5maW5kKCcuYmFza2V0X19jb2wtaW5wdXQnKS52YWwoKSk7XG5cdFx0XHRjb2wrKztcblx0XHRcdCQodGhpcykucGFyZW50KCkuZmluZCgnLmJhc2tldF9fY29sLWlucHV0JykudmFsKGNvbCk7XG5cblx0XHRcdC8vIHRvZG8gLS0gYWRkIGFqYXggdG8gaW5jcmVhc2UgY29sXG5cdFx0XHRjaGFuZ2VQcmljZSgzMDAwMCwgNTAwMDApO1xuXHRcdH0pO1xuXHRcdC8vIGRlY3JlYXNlIGNvbFxuXHRcdCQoJy5iYXNrZXRfX2RlY3JlYXNlJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKXtcblx0XHRcdHZhciBjb2wgPSBwYXJzZUludCgkKHRoaXMpLnBhcmVudCgpLmZpbmQoJy5iYXNrZXRfX2NvbC1pbnB1dCcpLnZhbCgpKTtcblx0XHRcdGNvbC0tO1xuXHRcdFx0aWYgKGNvbCA9PSAwKVxuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHQkKHRoaXMpLnBhcmVudCgpLmZpbmQoJy5iYXNrZXRfX2NvbC1pbnB1dCcpLnZhbChjb2wpO1xuXG5cdFx0XHRjaGFuZ2VQcmljZSgzMDAwMCwgNTAwMDApO1xuXHRcdH0pO1xuXHRcdCQoJy5iYXNrZXRfX3JlbW92ZScpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCl7XG5cdFx0XHQkKHRoaXMpLmNsb3Nlc3QoJy5iYXNrZXRfX3RhYmxlX19yb3cnKS5yZW1vdmUoKTtcblx0XHRcdGlmICgkKCcuYmFza2V0X190YWJsZScpLmZpbmQoJy5iYXNrZXRfX3RhYmxlX19yb3cnKS5sZW5ndGggPT09IDEpIHtcblx0XHRcdFx0JCgnLmJhc2tldF9fdGFibGUnKS5yZW1vdmUoKTtcblx0XHRcdFx0JCgnLmJhc2tldF9fZW1wdHknKS5zaG93KClcblx0XHRcdH1cblx0XHRcdC8vIHRvZG8gLSBhamF4IHRvIHJlbW92ZSBmcm9tIGJhc2tldFxuXHRcdFx0Y2hhbmdlUHJpY2UoMzAwMDAsIDUwMDAwKTtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9KTtcblxuXHRcdCQoXCIuYmFza2V0X19jb2wtaW5wdXRcIikub24oJ2tleXByZXNzJywgZnVuY3Rpb24gKGUpIHtcblx0XHRcdGNvbnNvbGUubG9nKGUud2hpY2gpO1xuXHRcdFx0Ly9pZiB0aGUgbGV0dGVyIGlzIG5vdCBkaWdpdCB0aGVuIGRpc3BsYXkgZXJyb3IgYW5kIGRvbid0IHR5cGUgYW55dGhpbmdcblx0XHRcdGlmIChlLndoaWNoICE9IDggJiYgZS53aGljaCAhPSAwICYmIChlLndoaWNoIDwgNDggfHwgZS53aGljaCA+IDU3KSkge1xuXG5cdFx0XHRcdC8vZGlzcGxheSBlcnJvciBtZXNzYWdlXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0aWYgKCEkLnRyaW0oJCh0aGlzKS52YWwoKSkgPT09ICcnKSB7XG5cdFx0XHRcdFx0Y2hhbmdlUHJpY2UoMzAwMDAsIDUwMDAwKTtcblx0XHRcdFx0fVxuXHRcdFx0XHQvLyB0b2RvIC0gYWpheCBjaGFuZ2UgdGhlIG51bWJlclxuXHRcdFx0fVxuXHRcdH0pLm9uKCdibHVyJywgZnVuY3Rpb24oKXtcblx0XHRcdC8vIGlmIHdlIGxlYXZlIHRoZSBpbnB1dCBhbmQgdGhlcmUncyBlbXB0eSB2YWx1ZVxuXHRcdFx0aWYgKCQudHJpbSgkKHRoaXMpLnZhbCgpKSA9PT0gJycpIHtcblx0XHRcdFx0JCh0aGlzKS52YWwoJzEnKTtcblx0XHRcdFx0Ly8gdG9kbyAtIGFqYXggY2hhbmdlIHRoZSBudW1iZXJcblx0XHRcdH1cblx0XHR9KTtcblx0XHQvLyBzaG93IGJhc2tldCBwb3B1cFxuXHRcdCQoJy5iYXNrZXQtcG9wdXAtdHJpZ2dlcicpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCl7XG5cdFx0XHQkKHRoaXMpLnBhcmVudCgpLmZpbmQoJy5iYXNrZXRfX3BvcHVwJykuZmFkZUluKDMwMCk7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fSk7XG5cdFx0Ly9jaGFuZ2UgcGFyYW1zXG5cdFx0JCgnLmJhc2tldF9fcG9wdXBfX3N1Ym1pdCcpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCl7XG5cdFx0XHR2YXIgcGFyYW1zID0gJCh0aGlzKS5jbG9zZXN0KCcuYmFza2V0X19wb3B1cCcpLmZpbmQoJy5ib29rLWJpa2VfX2NlbnRlcl9mcmFtZS1saW5lJykuaHRtbCgpO1xuXHRcdFx0JCh0aGlzKS5jbG9zZXN0KCcuYmFza2V0X19wb3B1cC0tb3V0ZXInKS5maW5kKCcuYmFza2V0LXBvcHVwLXRyaWdnZXInKS5odG1sKHBhcmFtcyk7XG5cdFx0XHQvLyB0b2RvIC0gYWpheCB0byBjaGFuZ2UgcGFyYW1zIG9mIHRoZSBvcmRlclxuXHRcdFx0JCh0aGlzKS5jbG9zZXN0KCcuYmFza2V0X19wb3B1cCcpLmZhZGVPdXQoMzAwKTtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9KTtcblxuXHRcdC8vIGZ1bmN0aW9uIGNoYW5nZSBwcmljZVxuXHRcdGZ1bmN0aW9uIGNoYW5nZVByaWNlKG5ld1ByaWNlLCBvdmVyYWxsUHJpY2Upe1xuXHRcdFx0Ly9jaGFuZ2UgcHJpY2Vcblx0XHRcdCQoJyNiYXNrZXRQcmljZScpLnRleHQobnVtZXJhbChuZXdQcmljZSkuZm9ybWF0KCcwLDAnKSk7XG5cdFx0XHQvL2NoYW5nZSB0b3RhbCBwcmljZVxuXHRcdFx0JCgnI2Jhc2tldFRvdGFsUHJpY2UnKS50ZXh0KG51bWVyYWwob3ZlcmFsbFByaWNlKS5mb3JtYXQoJzAsMCcpKTtcblx0XHR9XG5cdFx0aWYgKCQoJyNiYXNrZXRTaWRlYmFyJykubGVuZ3RoKSB7XG5cdFx0XHQkKCcjYmFza2V0U2lkZWJhcicpLnN0aWNrX2luX3BhcmVudCh7cGFyZW50OlwiI2Jhc2tldEZvcm1cIiwgb2Zmc2V0X3RvcDogMTV9KTtcblx0XHR9XG5cdFx0JCgnI3Byb21vY29kZVRyaWdnZXInKS5vbignY2xpY2snLCBmdW5jdGlvbigpe1xuXHRcdFx0JCh0aGlzKS5wYXJlbnQoKS5maW5kKCcuYmFza2V0X19wcm9tb2NvZGUtLWhpZGRlbicpLnNsaWRlVG9nZ2xlKDMwMCk7XG5cdFx0XHRyZXR1cm4gZmFsc2Vcblx0XHR9KTtcblx0XHQvLyB1c2VyIGV4aXN0cyBjaGVja1xuXHRcdCQoJyNiYXNrZXRfZW1haWwnKS5vbignYmx1cicsIGZ1bmN0aW9uKCl7XG5cdFx0XHQvLyB0b2RvIC0gYWpheCBjaGVjayBpZiB1c2VyIGV4aXN0c1xuXHRcdFx0dmFyIGNvbnRhY3RzID0gJCgnI2Jhc2tldENvbnRhY3RzJyk7XG5cdFx0XHQkKCcjYmFza2V0QXV0aCcpLmNzcyh7XG5cdFx0XHRcdGhlaWdodDogY29udGFjdHMub3V0ZXJIZWlnaHQoKVxuXHRcdFx0fSkuc2hvdygpO1xuXHRcdH0pO1xuXHRcdCQoJyNiYXNrZXRBdXRoIC5iYXNrZXRfX2Nsb3NlJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKXtcblx0XHRcdCQoJyNiYXNrZXRBdXRoJykuaGlkZSgpO1xuXHRcdH0pO1xuXHRcdCQoJy5mb3JtLXBsYWluIGlucHV0W3R5cGU9XCJ0ZXh0XCJdJykub24oJ2ZvY3VzJywgZnVuY3Rpb24oKXtcblx0XHRcdCQodGhpcykucGFyZW50KCkuZmluZCgnLmJhc2tldF9fbm8nKS5oaWRlKCk7XG5cdFx0XHQkKHRoaXMpLnJlbW92ZUNsYXNzKCdlcnJvcicpO1xuXHRcdH0pLm9uKCdibHVyJywgZnVuY3Rpb24oKXtcblx0XHRcdGlmICgkLnRyaW0oJCh0aGlzKS52YWwoKSkgIT09ICcnKSB7XG5cdFx0XHRcdCQodGhpcykucGFyZW50KCkuZmluZCgnLmJhc2tldF9fb2snKS5zaG93KCk7XG5cdFx0XHRcdCQodGhpcykucGFyZW50KCkuZmluZCgnLmJhc2tldF9fbm8nKS5oaWRlKCk7XG5cdFx0XHRcdCQodGhpcykucmVtb3ZlQ2xhc3MoJ2Vycm9yJykuYWRkQ2xhc3MoJ2NvcnJlY3QnKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdCQodGhpcykucGFyZW50KCkuZmluZCgnLmJhc2tldF9fb2snKS5oaWRlKCk7XG5cdFx0XHRcdCQodGhpcykucmVtb3ZlQ2xhc3MoJ2NvcnJlY3QnKTtcblx0XHRcdH1cblx0XHR9KTtcblx0XHRpZiAoJCgnI2Jhc2tldF9waG9uZScpLmxlbmd0aClcblx0XHRcdCQoJyNiYXNrZXRfcGhvbmUnKS5pbnB1dG1hc2soe1wibWFza1wiOiBcIis5ICg5OTkpIDk5OTk5OTlcIn0pO1xuXHRcdGlmICgkKCcjYmFza2V0Rm9ybScpLmxlbmd0aCkge1xuXHRcdFx0JCgnI2Jhc2tldEZvcm0nKS52YWxpZGF0ZSh7XG5cdFx0XHRcdG9ua2V5dXA6IGZhbHNlLFxuXHRcdFx0XHRvbmZvY3Vzb3V0OiBmYWxzZSxcblx0XHRcdFx0ZXJyb3JQbGFjZW1lbnQ6IGZ1bmN0aW9uKGVycm9yLCBlbGVtZW50KSB7XG5cdFx0XHRcdFx0JCgnI2Vycm9ycycpLnNob3coKTtcblxuXHRcdFx0XHRcdHZhciB0ZXh0ID0gZXJyb3IudGV4dCgpO1xuXHRcdFx0XHRcdGVycm9yLnRleHQodGV4dCArICcsICcpO1xuXHRcdFx0XHRcdGVycm9yLmFwcGVuZFRvKCcjZXJyb3JzIHVsJyk7XG5cdFx0XHRcdFx0ZWxlbWVudC5wYXJlbnQoKS5maW5kKCcuYmFza2V0X19vaycpLmhpZGUoKTtcblx0XHRcdFx0XHRlbGVtZW50LnBhcmVudCgpLmZpbmQoJy5iYXNrZXRfX25vJykuc2hvdygpO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRpbnZhbGlkSGFuZGxlcjogZnVuY3Rpb24oZXZlbnQsIHZhbGlkYXRvcil7XG5cdFx0XHRcdFx0dmFyIGVycm9ycyA9IHZhbGlkYXRvci5udW1iZXJPZkludmFsaWRzKCk7XG5cdFx0XHRcdFx0aWYgKGVycm9ycykge1xuXHRcdFx0XHRcdFx0JCgnI2Vycm9ycycpLnNob3coKTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0JCgnI2Vycm9ycycpLmhpZGUoKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0pXG5cdFx0fVxuXG5cdH1cbn07IiwidmFyIHZpZGVvcyA9IHJlcXVpcmUoJy4uL2NhcmQvdmlkZW9zJyk7XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuXHRpbml0OiBmdW5jdGlvbiAoKSB7XG5cdFx0JCgnLmNhcmQtYmlnX19jZW50ZXI6dmlzaWJsZScpLm9uKCdpbml0JywgZnVuY3Rpb24gKCkge1xuXHRcdFx0JCgnLmNhcmQtYmlnX19jZW50ZXI6dmlzaWJsZScpLmNzcyh7XG5cdFx0XHRcdG9wYWNpdHk6IDFcblx0XHRcdH0pO1xuXHRcdH0pO1xuXG5cdFx0JCgnLmNhcmQtYmlnX19jZW50ZXI6dmlzaWJsZScpLnNsaWNrKHtcblx0XHRcdGRvdHM6IHRydWUsXG5cdFx0XHRhcnJvd3M6IGZhbHNlLFxuXHRcdFx0aW5maW5pdGU6IHRydWUsXG5cdFx0XHRzcGVlZDogNTAwLFxuXHRcdFx0ZmFkZTogdHJ1ZSxcblx0XHRcdGNzc0Vhc2U6ICdlYXNlLW91dCcsXG5cdFx0XHRsYXp5TG9hZDogJ29uZGVtYW5kJyxcblx0XHRcdGFjY2Vzc2liaWxpdHk6IGZhbHNlLFxuXHRcdFx0Y3VzdG9tUGFnaW5nOiBmdW5jdGlvbiAoc2xpZGVyLCBpKSB7XG5cdFx0XHRcdHZhciBfc2xpZGUgPSAkKHNsaWRlci4kc2xpZGVzW2ldKTtcblx0XHRcdFx0dmFyIF9pZCA9IF9zbGlkZS5hdHRyKCdkYXRhLWFuY2hvcicpO1xuXHRcdFx0XHR2YXIgaWRTdHJpbmcgPSBfaWQgPyAoJ2lkPVwiJyArIF9pZCArICdcIicpIDogJyc7XG5cdFx0XHRcdHZhciB2aWRlb0lkID0gX3NsaWRlLmF0dHIoJ2RhdGEtdmlkZW8taWQnKTtcblxuXHRcdFx0XHR2YXIgcHJlcGVuZCA9ICc8ZGl2IGNsYXNzPVwiY2FyZC10aHVtYm5haWxcIicgKyBpZFN0cmluZyArICc+Jztcblx0XHRcdFx0dmFyIGFwcGVuZCA9ICc8L2Rpdj4nO1xuXHRcdFx0XHR2YXIgaW1nVVJMID0gX3NsaWRlLmNsb3Nlc3QoJy5pbWFnZScpLmF0dHIoJ2RhdGEtdGh1bWJuYWlsJyk7XG5cdFx0XHRcdHZhciBpbWdTdHIgPSAnPGltZyBzcmM9XCInICsgKGltZ1VSTCA/IGltZ1VSTCA6ICcvL2kueXRpbWcuY29tL3ZpLycgKyB2aWRlb0lkICsgJy9ocWRlZmF1bHQuanBnJykgKyAnXCIgYWx0PVwiZ2FsbGVyeS10aHVtYm5haWxcIj4nO1xuXHRcdFx0XHR2YXIgcGxheUljb24gPSBfaWQgPyAkKCcjdGh1bWJuYWlsLXZpZGVvJykuY2xvbmUoKS5odG1sKCkgOiAnJztcblxuXHRcdFx0XHRyZXR1cm4gJzxidXR0b24gIGNsYXNzPVwiJyArICh2aWRlb0lkID8gJ3RodW1ibmFpbC12aWRlbyAnIDogJycpICsgJ3RhYlwiPicgKyBwcmVwZW5kICsgaW1nU3RyICsgcGxheUljb24gKyBhcHBlbmQgKyAnPC9idXR0b24+Jztcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdC8vIGRpc2FibGUgdmlkZW8gZ2FsbGVyeSBzbGlkZVxuXHRcdCQoJy5zbGljay1kb3RzIC50aHVtYm5haWwtdmlkZW8nKS5wYXJlbnQoKS5vZmYoJ2NsaWNrLnNsaWNrJyk7XG5cblx0XHQvLyBzY3JvbGwgdG8gYmlnIHZpZGVvIHBsYXllciBhZnRlciBjbGljayBvbiB0aGUgdGh1bWJuYWlsXG5cdFx0JCgnLnNsaWNrLWRvdHMnKS5vbignY2xpY2snLCAnI3RodW1ibmFpbC12aWRlbycsIGZ1bmN0aW9uIChlKSB7XG5cdFx0XHQkKCcjaW5uZXJQb2ludHMgLnRhYnNfX3BvaW50c19faXRlbScpLmVxKDApLmZpbmQoJ2EnKS50cmlnZ2VyKCdjbGljaycpO1xuXHRcdFx0JC5zY3JvbGxUbygnI3BhZ2UtdmlkZW8nLCA0MDAsIHtvZmZzZXQ6IHt0b3A6IC0zMDAsIGxlZnQ6IDB9IH0pO1xuXG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fSk7XG5cblx0XHQkKCdib2R5Jykub24oe1xuXHRcdFx0Y2xpY2s6IGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0JC5zY3JvbGxUbygwLCA0MDApO1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cdFx0fSwgJyNzY3JvbGxUb1RvcCcpO1xuXHR9XG59O1xuIiwibW9kdWxlLmV4cG9ydHMgPSB7XG5cdGluaXQ6IGZ1bmN0aW9uICgpIHtcblx0XHQvLyBsb29wIHRocm91Z2ggYWxsIGRpdnMgd2l0aCBjbGFzcyBcInlvdXR1YmUtcGxheWVyXCIgKGJpZyBwbGF5ZXIpXG5cdFx0Ly8gY3JlYXRlIHRodW1ibmFpbCB0aGVuIGFkZCBvbmNsaWNrIGxpc3RlbmVyXG5cdFx0dmFyIHYgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwieW91dHViZS1wbGF5ZXJcIik7XG5cdFx0Zm9yICh2YXIgbiA9IDA7IG4gPCB2Lmxlbmd0aDsgbisrKSB7XG5cdFx0XHR2YXIgcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG5cdFx0XHRpZiAodltuXS5nZXRBdHRyaWJ1dGUoJ2RhdGEtcHJldmlldycpICE9PSBudWxsKSB7XG5cdFx0XHRcdHAuaW5uZXJIVE1MID0gbGFibm9sVGh1bWJXaXRoU3JjKHZbbl0uZ2V0QXR0cmlidXRlKCdkYXRhLXByZXZpZXcnKSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRwLmlubmVySFRNTCA9IGxhYm5vbFRodW1iKHZbbl0uZ2V0QXR0cmlidXRlKCdkYXRhLWlkJykpO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAodltuXS5jbGFzc05hbWUubWF0Y2goL3lvdXR1YmVcXC1wbGF5ZXJcXC1cXC1tb2QvZykpIHtcblx0XHRcdFx0KGZ1bmN0aW9uKG4pe1xuXHRcdFx0XHRcdHZbbl0ucGFyZW50Tm9kZS5wYXJlbnROb2RlLnBhcmVudE5vZGUub25jbGljayA9IGZ1bmN0aW9uKCl7XG5cdFx0XHRcdFx0XHRzaG93UG9wdXBWaWRlbyh7XG5cdFx0XHRcdFx0XHRcdGlkOiB2W25dLmdldEF0dHJpYnV0ZSgnZGF0YS1pZCcpLFxuXHRcdFx0XHRcdFx0XHR0aXRsZTogdltuXS5nZXRBdHRyaWJ1dGUoJ2RhdGEtdGl0bGUnKSxcblx0XHRcdFx0XHRcdFx0aW1nOiB2W25dLmdldEF0dHJpYnV0ZSgnZGF0YS1pbWcnKSB8fCAncHJldmlldydcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSkobik7XG5cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHAub25jbGljayA9IGxhYm5vbElmcmFtZTtcblx0XHRcdH1cblx0XHRcdHZbbl0uYXBwZW5kQ2hpbGQocCk7XG5cdFx0fVxuXG5cdFx0Ly8gbG9vcCB0aHJvdWdoIGFsbCBkaXZzIHdpdGggY2xhc3MgXCJjYXJkX192aWRlb19fc3VnZ2VzdGVkX3RodW1ibmFpbFwiIChzdWdnZXN0ZWQgdmlkZW9zKVxuXHRcdHZhciB2MiA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJjYXJkX192aWRlb19fc3VnZ2VzdGVkX3RodW1ibmFpbFwiKTtcblx0XHRmb3IgKHZhciBuID0gMDsgbiA8IHYyLmxlbmd0aDsgbisrKSB7XG5cdFx0XHR2YXIgcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG5cdFx0XHR2MltuXS5nZXRFbGVtZW50c0J5VGFnTmFtZSgnSU1HJylbMF0uc3JjID0gJ2h0dHA6Ly9pLnl0aW1nLmNvbS92aS8nICsgdjJbbl0uZ2V0QXR0cmlidXRlKCdkYXRhLWlkJykgKyAnL2hxZGVmYXVsdC5qcGcnO1xuXHRcdFx0djJbbl0uYXBwZW5kQ2hpbGQocCk7XG5cdFx0fVxuXG5cdFx0Ly8gY3Jhd2wgdGh1bWJuYWlsIGZvciB2aWRlbyBieSBpdHMgaWRcblx0XHRmdW5jdGlvbiBsYWJub2xUaHVtYihpZCkge1xuXHRcdFx0cmV0dXJuICc8aW1nIGNsYXNzPVwieW91dHViZS10aHVtYlwiIHNyYz1cImh0dHA6Ly9pLnl0aW1nLmNvbS92aS8nICsgaWQgKyAnL2hxZGVmYXVsdC5qcGdcIj48ZGl2IGNsYXNzPVwiY2FyZF9fdmlkZW9fcGxheS1idG5cIj48c3ZnIGNsYXNzPVwiaWNvbiBjYXJkX192aWRlb19wbGF5LWJ0bl9pbWdcIj4nICsgXCI8dXNlIHhsaW5rOmhyZWY9XFxcIi4uL2Fzc2V0cy9pbWFnZXMvaWNvbi5zdmcjaWNvbl9wbGF5LXJvdW5kZWRcXFwiKTwvdXNlPlwiICsgJzwvc3ZnPjwvZGl2Pic7XG5cdFx0fVxuXHRcdGZ1bmN0aW9uIGxhYm5vbFRodW1iV2l0aFNyYyhzcmMpIHtcblx0XHRcdHJldHVybiAnPGltZyBjbGFzcz1cInlvdXR1YmUtdGh1bWJcIiBzcmM9XCInKyBzcmMrJ1wiPjxkaXYgY2xhc3M9XCJjYXJkX192aWRlb19wbGF5LWJ0blwiPjxzdmcgY2xhc3M9XCJpY29uIGNhcmRfX3ZpZGVvX3BsYXktYnRuX2ltZ1wiPicgKyBcIjx1c2UgeGxpbms6aHJlZj1cXFwiLi4vYXNzZXRzL2ltYWdlcy9pY29uLnN2ZyNpY29uX3BsYXktcm91bmRlZFxcXCIpPC91c2U+XCIgKyAnPC9zdmc+PC9kaXY+Jztcblx0XHR9XG5cdFx0ZnVuY3Rpb24gc2hvd1BvcHVwVmlkZW8ob2JqKSB7XG5cdFx0XHR2YXIgJHBvcHVwID0gJCgnI3ZpZGVvUGFnZVBvcHVwJyksXG5cdFx0XHRcdCR0aXRsZSA9ICRwb3B1cC5maW5kKCcudmlkZW8tcGFnZS1wb3B1cF9fdGl0bGUnKSxcblx0XHRcdFx0JGNvbnRhaW5lciA9ICRwb3B1cC5maW5kKCcudmlkZW8tcGFnZS1wb3B1cF9fY29udGFpbmVyJyk7XG5cdFx0XHQkdGl0bGUudGV4dChvYmoudGl0bGUpO1xuXHRcdFx0JCgnLmJnLWxheWVyJykuZmFkZUluKDMwMCk7XG5cdFx0XHR2YXIgdG9wR2FwID0gJCh3aW5kb3cpLnNjcm9sbFRvcCgpICsgJCh3aW5kb3cpLmhlaWdodCgpIC8gMiAtICRwb3B1cC5vdXRlckhlaWdodCgpIC8gMjtcblx0XHRcdHRvcEdhcCA9ICh0b3BHYXAgPCAwKSA/ICcyMHB4JyA6IHRvcEdhcDtcblx0XHRcdCRwb3B1cC5jc3Moe3RvcDogdG9wR2FwfSkuZmFkZUluKDMwMCk7XG5cblx0XHRcdGlmIChvYmouaW1nID09PSAncHJldmlldycpIHtcblx0XHRcdFx0JGNvbnRhaW5lci5lbXB0eSgpLmFwcGVuZChsYWJub2xUaHVtYihvYmouaWQpKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdCRjb250YWluZXIuZW1wdHkoKS5hcHBlbmQobGFibm9sVGh1bWJXaXRoU3JjKG9iai5pbWcpKVxuXHRcdFx0fVxuXHRcdFx0Ly8gLXRvZG8gYWpheCBoZXJlIHRvIGFkZCBpbmZvIGFib3V0IHRoZSBjYXJkXG5cdFx0XHQkY29udGFpbmVyLm9uKCdjbGljaycsIGZ1bmN0aW9uKCl7XG5cdFx0XHRcdHZhciBpZnJhbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaWZyYW1lXCIpO1xuXHRcdFx0XHRpZnJhbWUuc2V0QXR0cmlidXRlKFwic3JjXCIsIFwiaHR0cDovL3d3dy55b3V0dWJlLmNvbS9lbWJlZC9cIiArIG9iai5pZCArIFwiP2F1dG9wbGF5PTEmYXV0b2hpZGU9MiZib3JkZXI9MCZ3bW9kZT1vcGFxdWUmZW5hYmxlanNhcGk9MSZjb250cm9scz0xJnNob3dpbmZvPTBcIik7XG5cdFx0XHRcdGlmcmFtZS5zZXRBdHRyaWJ1dGUoXCJmcmFtZWJvcmRlclwiLCBcIjBcIik7XG5cdFx0XHRcdGlmcmFtZS5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBcInlvdXR1YmUtaWZyYW1lXCIpO1xuXHRcdFx0XHQkY29udGFpbmVyLmZpbmQoJ2ltZycpLnJlbW92ZSgpO1xuXHRcdFx0XHQkY29udGFpbmVyLmZpbmQoJy5jYXJkX192aWRlb19wbGF5LWJ0bl9pbWcnKS5yZW1vdmUoKTtcblx0XHRcdFx0JGNvbnRhaW5lci5hcHBlbmQoaWZyYW1lKTtcblx0XHRcdH0pO1xuXG5cdFx0fVxuXHRcdGZ1bmN0aW9uIGhpZGVWaWRlb1BvcHVwKCkge1xuXHRcdFx0JCgnI3ZpZGVvUGFnZVBvcHVwJykuZmluZCgnaWZyYW1lJykucmVtb3ZlKCk7XG5cdFx0fVxuXHRcdCQoJyN2aWRlb1BhZ2VQb3B1cCAucG9wdXBfX2Nsb3NlJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKXtcblx0XHRcdGhpZGVWaWRlb1BvcHVwKCk7XG5cdFx0fSk7XG5cdFx0JCgnLmJnLWxheWVyJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuXHRcdFx0aWYgKCQoJyN2aWRlb1BhZ2VQb3B1cCcpLmxlbmd0aCkge1xuXHRcdFx0XHRoaWRlVmlkZW9Qb3B1cCgpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHRcdCQoZG9jdW1lbnQpLmtleXVwKGZ1bmN0aW9uKGUpIHtcblx0XHRcdGlmICgkKCcjdmlkZW9QYWdlUG9wdXAnKS5sZW5ndGgpIHtcblx0XHRcdFx0aGlkZVZpZGVvUG9wdXAoKTtcblx0XHRcdH1cblx0XHR9KTtcblx0XHQvLyB2aWRlbyB0YWJzXG5cdFx0JCgnI3RhYnNWaWRlbycpLnN0aWNrX2luX3BhcmVudCgpO1xuXHRcdCQoJy5zY3JvbGxUYWIgPiBhJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKXtcblx0XHRcdHZhciBhZGRyID0gJCh0aGlzKS5hdHRyKCdocmVmJyk7XG5cdFx0XHQkLnNjcm9sbFRvKCQoYWRkcikub2Zmc2V0KCkudG9wIC0gNzAsIDMwMCk7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fSk7XG5cdFx0Ly8gcmVwbGFjZSBwbGF5ZXIgZGl2IHdpdGggdGh1bWJuYWlsIGJ5IHJlYWwgaUZyYW1lIHdpdGggeW91dHViZSBwbGF5ZXJcblx0XHRmdW5jdGlvbiBsYWJub2xJZnJhbWUoKSB7XG5cdFx0XHR2YXIgdmlkZW9JZCA9IHRoaXMucGFyZW50Tm9kZS5nZXRBdHRyaWJ1dGUoJ2RhdGEtaWQnKTtcblxuXHRcdFx0dmFyIGlmcmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpZnJhbWVcIik7XG5cdFx0XHRpZnJhbWUuc2V0QXR0cmlidXRlKFwic3JjXCIsIFwiaHR0cDovL3d3dy55b3V0dWJlLmNvbS9lbWJlZC9cIiArIHZpZGVvSWQgKyBcIj9hdXRvcGxheT0xJmF1dG9oaWRlPTImYm9yZGVyPTAmd21vZGU9b3BhcXVlJmVuYWJsZWpzYXBpPTEmY29udHJvbHM9MSZzaG93aW5mbz0wXCIpO1xuXHRcdFx0aWZyYW1lLnNldEF0dHJpYnV0ZShcImZyYW1lYm9yZGVyXCIsIFwiMFwiKTtcblx0XHRcdGlmcmFtZS5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBcInlvdXR1YmUtaWZyYW1lXCIpO1xuXHRcdFx0dGhpcy5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChpZnJhbWUsIHRoaXMpO1xuXHRcdH1cblx0XHQkKCcuc2hvdy10cmlnZ2VyLXZpZGVvJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKXtcblx0XHRcdC8vIC0gdG9kbyBhamF4IHJlcXVlc3QgZm9yIG1vcmUgdmlkZW9zXG5cdFx0XHQvLyBhcHBlbmQgdG8gdGhpcyBibG9ja1xuXHRcdFx0Ly8kKHRoaXMpLnByZXYoJy50YWJzLWxpbmtzX19jb250ZW50JykuZmluZCgnLmNvbnRhaW5lcicpO1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH0pO1xuXHRcdC8vIGNsaWNrIG9uIHN1Z2dlc3RlZCB0aHVtYm5haWwgLS0gcmVwbGFjZSBwbGF5ZXIgZGl2IHdpdGggdmlkZW8gZnJvbSBjbGlja2VkIHRodW1ibmFpbFxuXHRcdCQoJyNjYXJkVGFicycpLm9uKCdjbGljaycsICcjY2FyZHNDb250YWluZXIgLmNhcmRfX3ZpZGVvX19zdWdnZXN0ZWRfdGh1bWJuYWlsJywgZnVuY3Rpb24gKCkge1xuXHRcdFx0dmFyIHZpZGVvSWQgPSAkKHRoaXMpLmF0dHIoJ2RhdGEtaWQnKTtcblx0XHRcdHZhciB2aWRlb1RpdGxlID0gJCh0aGlzKS5hdHRyKCdkYXRhLXRpdGxlJyk7XG5cblx0XHRcdGlmICgkKHRoaXMpLmhhc0NsYXNzKCdjYXJkX192aWRlb19fc3VnZ2VzdGVkX3RodW1ibmFpbC0tYWN0aXZlJykpIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHR2YXIgdmlkZW9UaXRsZUVsZW1lbnQgPSAkKHRoaXMpLmNsb3Nlc3QoJy5jYXJkLS1pbm5lcicpLmZpbmQoJ2EnKTtcblx0XHRcdHZpZGVvVGl0bGVFbGVtZW50LnRleHQodmlkZW9UaXRsZSk7XG5cblx0XHRcdHZhciBpZnJhbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaWZyYW1lXCIpO1xuXHRcdFx0aWZyYW1lLnNldEF0dHJpYnV0ZShcInNyY1wiLCBcImh0dHA6Ly93d3cueW91dHViZS5jb20vZW1iZWQvXCIgKyB2aWRlb0lkICsgXCI/YXV0b3BsYXk9MSZhdXRvaGlkZT0yJmJvcmRlcj0wJndtb2RlPW9wYXF1ZSZlbmFibGVqc2FwaT0xJmNvbnRyb2xzPTAmc2hvd2luZm89MFwiKTtcblx0XHRcdGlmcmFtZS5zZXRBdHRyaWJ1dGUoXCJmcmFtZWJvcmRlclwiLCBcIjBcIik7XG5cdFx0XHRpZnJhbWUuc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJ5b3V0dWJlLWlmcmFtZVwiKTtcblxuXHRcdFx0JCh0aGlzKS5jbG9zZXN0KCcuY2FyZC0taW5uZXInKS5cblx0XHRcdGZpbmQoJy55b3V0dWJlLXBsYXllcicpLlxuXHRcdFx0aHRtbChpZnJhbWUpO1xuXG5cdFx0XHQkKHRoaXMpLmNsb3Nlc3QoJy5jYXJkLS1pbm5lcicpXG5cdFx0XHQuZmluZCgnLmNhcmRfX3ZpZGVvX19zdWdnZXN0ZWRfdGh1bWJuYWlsJylcblx0XHRcdC5yZW1vdmVDbGFzcygnY2FyZF9fdmlkZW9fX3N1Z2dlc3RlZF90aHVtYm5haWwtLWFjdGl2ZScpO1xuXG5cdFx0XHQvLyBhZGQgcmVkIGJvcmRlclxuXHRcdFx0JCh0aGlzKS5hZGRDbGFzcygoJ2NhcmRfX3ZpZGVvX19zdWdnZXN0ZWRfdGh1bWJuYWlsLS1hY3RpdmUnKSk7XG5cblx0XHR9KTtcblxuXHR9XG59OyIsIm1vZHVsZS5leHBvcnRzID0ge1xuXHRcdGluaXQ6IGZ1bmN0aW9uICgpIHtcblx0XHRcdHZhciBwYXJlbnRTZWxlY3RvciA9ICcuYm9vay1iaWtlX19jZW50ZXJfZnJhbWUtbGluZSc7XG5cdFx0XHR2YXIgZnJhbWVOYW1lU2VsZWN0b3IgPSAnLmJvb2stYmlrZV9fY2VudGVyX2ZyYW1lLW5hbWUnO1xuXHRcdFx0dmFyIGZyYW1lU2l6ZVNlbGVjdG9yID0gJy5ib29rLWJpa2VfX2NlbnRlcl9mcmFtZS1zaXplJztcblx0XHRcdHZhciBmcmFtZU5hbWVBY3RpdmVDbGFzcyA9ICdib29rLWJpa2VfX2NlbnRlcl9mcmFtZS1uYW1lLS1hY3RpdmUnO1xuXHRcdFx0dmFyIHBhcmVudEVsZW1lbnQgPSAkKHBhcmVudFNlbGVjdG9yKTtcblx0XHRcdHZhciBwYXJlbnRUaXRsZSA9ICcuYm9vay1iaWtlX19jZW50ZXJfZnJhbWUtdGl0bGUnO1xuXHRcdFx0dmFyIHNlbGVjdGVkQmxvY2sgPSAnLmJvb2stYmlrZV9fY2VudGVyX2ZyYW1lLXNlbGVjdGVkJztcblxuXHRcdFx0cGFyZW50RWxlbWVudC5vbignY2xpY2snLCAnbGFiZWwnLCBmdW5jdGlvbigpIHtcblx0XHRcdFx0dmFyIGNvbG9yV29yZCA9ICQodGhpcykuYXR0cignZGF0YS1jb2xvcicpO1xuXHRcdFx0XHR2YXIgZnJhbWVTaXplID0gJCh0aGlzKS5jbG9zZXN0KHBhcmVudFNlbGVjdG9yKS5maW5kKGZyYW1lU2l6ZVNlbGVjdG9yKS50ZXh0KCk7XG5cdFx0XHRcdHZhciBmcmFtZU5hbWUgPSAkKHRoaXMpLmNsb3Nlc3QocGFyZW50U2VsZWN0b3IpLmZpbmQoZnJhbWVOYW1lU2VsZWN0b3IpLnRleHQoKTtcblxuXHRcdFx0XHQvLyBoaWdobGlnaHQgYWN0aXZlIGxpbmVcblx0XHRcdFx0JChmcmFtZU5hbWVTZWxlY3RvcikucmVtb3ZlQ2xhc3MoZnJhbWVOYW1lQWN0aXZlQ2xhc3MpO1xuXHRcdFx0XHQkKHRoaXMpLmNsb3Nlc3QocGFyZW50U2VsZWN0b3IpLmZpbmQoZnJhbWVOYW1lU2VsZWN0b3IpLmFkZENsYXNzKGZyYW1lTmFtZUFjdGl2ZUNsYXNzKTtcblxuXG5cdFx0XHRcdC8vIHNldCBuZXcgdmFsdWVzIGZvciBcIlNlbGVjdGVkXCIgbGluZVxuXHRcdFx0XHQkKHRoaXMpLmNsb3Nlc3QoJy5ib29rLWJpa2VfX2NlbnRlcl9mcmFtZScpLmZpbmQoJy5jdXJyZW50LWZyYW1lLWNvbG9yJykudGV4dChjb2xvcldvcmQpO1xuXHRcdFx0XHQkKHRoaXMpLmNsb3Nlc3QoJy5ib29rLWJpa2VfX2NlbnRlcl9mcmFtZScpLmZpbmQoJy5jdXJyZW50LWZyYW1lLXNpemUnKS50ZXh0KGZyYW1lU2l6ZSArICcsICcpO1xuXHRcdFx0XHQkKHRoaXMpLmNsb3Nlc3QoJy5ib29rLWJpa2VfX2NlbnRlcl9mcmFtZScpLmZpbmQoJy5jdXJyZW50LWZyYW1lLW5hbWUnKS50ZXh0KGZyYW1lTmFtZSk7XG5cdFx0XHRcdCQodGhpcykuY2xvc2VzdCgnLmJvb2stYmlrZV9fY2VudGVyX2ZyYW1lJykuZmluZChwYXJlbnRUaXRsZSkuaGlkZSgpO1xuXHRcdFx0XHQkKHRoaXMpLmNsb3Nlc3QoJy5ib29rLWJpa2VfX2NlbnRlcl9mcmFtZScpLmZpbmQoc2VsZWN0ZWRCbG9jaykuc2hvdygpO1xuXHRcdFx0XHQkKCcjYnV5U21hbGxQb3B1cFRyaWdnZXInKS5yZW1vdmVDbGFzcygnZm9ybS1kaXNhYmxlZCcpLmFkZENsYXNzKCdidG4tcmVkJyk7XG5cdFx0XHR9KTtcblx0XHRcdHBhcmVudEVsZW1lbnQuZmluZCgnbGFiZWwnKS5vbignbW91c2VvdmVyJywgZnVuY3Rpb24oKXtcblx0XHRcdFx0dmFyIGxlZnRQb3MsXG5cdFx0XHRcdFx0dG9wUG9zLFxuXHRcdFx0XHRcdHBvcHVwID0gJCgnLmJvb2stYmlrZV9fc2ltcGxldGlwJyk7XG5cdFx0XHRcdHZhciBjb2xvcldvcmQgPSAkKHRoaXMpLmF0dHIoJ2RhdGEtY29sb3InKTtcblx0XHRcdFx0dmFyIGZyYW1lU2l6ZSA9ICQodGhpcykuY2xvc2VzdChwYXJlbnRTZWxlY3RvcikuZmluZChmcmFtZVNpemVTZWxlY3RvcikudGV4dCgpO1xuXHRcdFx0XHR2YXIgZnJhbWVOYW1lID0gJCh0aGlzKS5jbG9zZXN0KHBhcmVudFNlbGVjdG9yKS5maW5kKGZyYW1lTmFtZVNlbGVjdG9yKS50ZXh0KCk7XG5cdFx0XHRcdHBvcHVwLmZpbmQoJy5jdXJyZW50LWZyYW1lLWNvbG9yJykudGV4dChjb2xvcldvcmQpO1xuXHRcdFx0XHRwb3B1cC5maW5kKCcuY3VycmVudC1mcmFtZS1zaXplJykudGV4dChmcmFtZVNpemUgKyAnLCAnKTtcblx0XHRcdFx0cG9wdXAuZmluZCgnLmN1cnJlbnQtZnJhbWUtbmFtZScpLnRleHQoZnJhbWVOYW1lKTtcblx0XHRcdFx0bGVmdFBvcyAgPSAgJCh0aGlzKS5vZmZzZXQoKS5sZWZ0IC0gJCgnLmJvb2stYmlrZS13cmFwcGVyJykub2Zmc2V0KCkubGVmdDtcblx0XHRcdFx0bGVmdFBvcyA9IChNYXRoLmZsb29yKCQoJy5ib29rLWJpa2VfX3NpbXBsZXRpcCcpLm91dGVyV2lkdGgoKSArICAkKHRoaXMpLm9mZnNldCgpLmxlZnQpID49ICQod2luZG93KS53aWR0aCgpKVxuXHRcdFx0XHRcdD8gIGxlZnRQb3MgLSAkKCcuYm9vay1iaWtlX19zaW1wbGV0aXAnKS5vdXRlcldpZHRoKCkgKyAyMFxuXHRcdFx0XHRcdDogbGVmdFBvcyAtICQoJy5ib29rLWJpa2VfX3NpbXBsZXRpcCcpLm91dGVyV2lkdGgoKS8gMjtcblxuXHRcdFx0XHR0b3BQb3MgPSAkKHRoaXMpLm9mZnNldCgpLnRvcCAtICQoJy5ib29rLWJpa2Utd3JhcHBlcicpLm9mZnNldCgpLnRvcCArIDE4O1xuXHRcdFx0XHRwb3B1cC5jc3Moe2xlZnQ6IGxlZnRQb3MgKyAncHgnLCB0b3A6IHRvcFBvcyArICdweCcsIHpJbmRleDogMjAsIG9wYWNpdHk6IDF9KTtcblx0XHRcdH0pLm9uKCdtb3VzZW91dCcsIGZ1bmN0aW9uKCl7XG5cdFx0XHRcdCQoJy5ib29rLWJpa2VfX3NpbXBsZXRpcCcpLmNzcyh7b3BhY2l0eTogMCwgekluZGV4OiAwfSk7XG5cdFx0XHR9KTtcblxuXHRcdFx0fVxuXHRcdH07IiwibW9kdWxlLmV4cG9ydHMgPSB7XG5cdGluaXQ6IGZ1bmN0aW9uICgpIHtcblxuXHRcdGlmICgkKCcjcHJpY2Utc2xpZGVyJykubGVuZ3RoKSB7XG5cdFx0XHQoZnVuY3Rpb24oICQgKSB7XG5cblx0XHRcdFx0dmFyIGV2ZW50cyA9IFsgXCJjcmVhdGVcIiwgXCJzdGFydFwiLCBcInN0b3BcIiwgXCJzbGlkZVwiLCBcImNoYW5nZVwiIF07XG5cblx0XHRcdFx0JC53aWRnZXQoIFwiYXBwLnNsaWRlclwiLCAkLnVpLnNsaWRlciwge1xuXG5cdFx0XHRcdFx0X2dldENyZWF0ZUV2ZW50RGF0YTogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4geyB2YWx1ZXM6IHRoaXMudmFsdWVzKCkgfTtcblx0XHRcdFx0XHR9LFxuXG5cdFx0XHRcdFx0X2luaXQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0dmFyIHN0ZXBzID0gdGhpcy5vcHRpb25zLnN0ZXBzO1xuXHRcdFx0XHRcdFx0aWYgKCAkLmlzQXJyYXkoIHN0ZXBzICkgKSB7XG5cdFx0XHRcdFx0XHRcdHRoaXMub3B0aW9uKCBcIm1pblwiLCAwICk7XG5cdFx0XHRcdFx0XHRcdHRoaXMub3B0aW9uKCBcIm1heFwiLCBzdGVwcy5sZW5ndGggLSAxICk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSxcblxuXHRcdFx0XHRcdF90cmlnZ2VyOiBmdW5jdGlvbiggbmFtZSwgZSwgdWkgKSB7XG5cdFx0XHRcdFx0XHR2YXIgc3RlcHMgPSB0aGlzLm9wdGlvbnMuc3RlcHM7XG5cdFx0XHRcdFx0XHRpZiAoICEkLmlzQXJyYXkoIHN0ZXBzICkgKSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiB0aGlzLl9zdXBlckFwcGx5KCBhcmd1bWVudHMgKTtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0aWYgKCAkLmluQXJyYXkoIG5hbWUsIGV2ZW50cyApID49IDAgKSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiB0aGlzLl9zdXBlckFwcGx5KFtcblx0XHRcdFx0XHRcdFx0XHRuYW1lLFxuXHRcdFx0XHRcdFx0XHRcdGUsXG5cdFx0XHRcdFx0XHRcdFx0JC5leHRlbmQoIHVpLCB7XG5cdFx0XHRcdFx0XHRcdFx0XHRzdGVwVmFsdWU6IFtzdGVwc1t1aS52YWx1ZXNbMF1dLCBzdGVwc1t1aS52YWx1ZXNbMV1dXVxuXHRcdFx0XHRcdFx0XHRcdH0pXG5cdFx0XHRcdFx0XHRcdF0pO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRyZXR1cm4gdGhpcy5fc3VwZXJBcHBseSggYXJndW1lbnRzICk7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdH0pO1xuXG5cdFx0XHR9KShqUXVlcnkpO1xuXG5cdFx0XHRudW1lcmFsLmxhbmd1YWdlKCdydScpO1xuXG5cdFx0XHR2YXIgdmFsdWVzID0gWzE1MDAwLCAxODAwMCwgMjIwMDAsIDI3MDAwLCAzMDAwMCwgNTAwMDAsIDc1MDAwLCAxMjUwMDAsIDE1MDAwMCwgMjcwMDAwLCAzNTAwMDAsIDYwMDAwMCwgNzUwMDAwXTtcblxuXHRcdFx0dmFyIHNsaWRlciA9ICQoJyNwcmljZS1zbGlkZXInKS5zbGlkZXIoe1xuXHRcdFx0XHRyYW5nZTogdHJ1ZSxcblx0XHRcdFx0c3RlcHM6IHZhbHVlcyxcblx0XHRcdFx0Y3JlYXRlOiBmdW5jdGlvbihlLCB1aSl7XG5cdFx0XHRcdFx0JCgnI3ByaWNlLXNsaWRlcicpLnNsaWRlcigndmFsdWVzJywgMCwgMCk7XG5cdFx0XHRcdFx0JCgnI3ByaWNlLXNsaWRlcicpLnNsaWRlcigndmFsdWVzJywgMSwgNCk7XG5cdFx0XHRcdFx0JCgnI21pbl9wcmljZScpLnZhbChudW1lcmFsKHZhbHVlc1swXSkuZm9ybWF0KCcwLDAnKSk7XG5cdFx0XHRcdFx0JCgnI21heF9wcmljZScpLnZhbChudW1lcmFsKHZhbHVlc1s0XSkuZm9ybWF0KCcwLDAnKSk7XG5cdFx0XHRcdFx0JCgnI3ByaWNlLXNsaWRlcicpLmNzcyh7b3BhY2l0eTogMX0pO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRzbGlkZTogZnVuY3Rpb24oZXZlbnQsIHVpKXtcblx0XHRcdFx0XHQkKCcjbWluX3ByaWNlJykudmFsKG51bWVyYWwodWkuc3RlcFZhbHVlWzBdKS5mb3JtYXQoJzAsMCcpKTtcblx0XHRcdFx0XHQkKCcjbWF4X3ByaWNlJykudmFsKG51bWVyYWwodWkuc3RlcFZhbHVlWzFdKS5mb3JtYXQoJzAsMCcpKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0XHQvKiBmaW5kIG5lYXJlc3QgdmFsdWUgd2hlbiBzY3JvbGxpbmcgKi9cblx0XHRcdGZ1bmN0aW9uIGZpbmROZWFyZXN0KGluY2x1ZGVMZWZ0LCBpbmNsdWRlUmlnaHQsIHZhbHVlKSB7XG5cdFx0XHRcdHZhciBuZWFyZXN0ID0gbnVsbDtcblx0XHRcdFx0dmFyIGRpZmYgPSBudWxsO1xuXHRcdFx0XHR2YXIgY29sID0gMDtcblx0XHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCB2YWx1ZXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0XHRpZiAoKGluY2x1ZGVMZWZ0ICYmIHZhbHVlc1tpXSA8PSB2YWx1ZSkgfHwgKGluY2x1ZGVSaWdodCAmJiB2YWx1ZXNbaV0gPj0gdmFsdWUpKSB7XG5cdFx0XHRcdFx0XHR2YXIgbmV3RGlmZiA9IE1hdGguYWJzKHZhbHVlIC0gdmFsdWVzW2ldKTtcblx0XHRcdFx0XHRcdGlmIChkaWZmID09IG51bGwgfHwgbmV3RGlmZiA8IGRpZmYpIHtcblx0XHRcdFx0XHRcdFx0bmVhcmVzdCA9IHZhbHVlc1tpXTtcblx0XHRcdFx0XHRcdFx0ZGlmZiA9IG5ld0RpZmY7XG5cdFx0XHRcdFx0XHRcdGNvbCA9IGlcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIGNvbDtcblx0XHRcdH1cblx0XHRcdC8qIG1pbiBwcmljZSBpbnB1dCAqL1xuXHRcdFx0JCgnI21pbl9wcmljZScpLm9uKCdrZXl1cCcsIGZ1bmN0aW9uKCl7XG5cdFx0XHRcdCQoJyNwcmljZS1zbGlkZXInKS5zbGlkZXIoJ3ZhbHVlcycsIDAsIGZpbmROZWFyZXN0KHRydWUsIHRydWUsIG51bWVyYWwoKS51bmZvcm1hdCgkKHRoaXMpLnZhbCgpKSkpO1xuXG5cdFx0XHR9KS5vbignYmx1cicsIGZ1bmN0aW9uKCl7XG5cdFx0XHRcdCQoJyNwcmljZS1zbGlkZXInKS5zbGlkZXIoJ3ZhbHVlcycsIDAsIGZpbmROZWFyZXN0KHRydWUsIHRydWUsIG51bWVyYWwoKS51bmZvcm1hdCgkKHRoaXMpLnZhbCgpKSkpO1xuXHRcdFx0XHQkKHRoaXMpLnZhbChudW1lcmFsKCQodGhpcykudmFsKCkpLmZvcm1hdCgnMCwwJykpXG5cdFx0XHR9KTtcblxuXHRcdFx0LyogbWF4IHByaWNlIGlucHV0ICovXG5cdFx0XHQkKCcjbWF4X3ByaWNlJykub24oJ2tleXVwJywgZnVuY3Rpb24oKXtcblx0XHRcdFx0JCgnI3ByaWNlLXNsaWRlcicpLnNsaWRlcigndmFsdWVzJywgMSwgZmluZE5lYXJlc3QodHJ1ZSwgdHJ1ZSwgbnVtZXJhbCgpLnVuZm9ybWF0KCQodGhpcykudmFsKCkpKSk7XG5cblx0XHRcdH0pLm9uKCdibHVyJywgZnVuY3Rpb24oKXtcblx0XHRcdFx0JCgnI3ByaWNlLXNsaWRlcicpLnNsaWRlcigndmFsdWVzJywgMSwgZmluZE5lYXJlc3QodHJ1ZSwgdHJ1ZSwgbnVtZXJhbCgpLnVuZm9ybWF0KCQodGhpcykudmFsKCkpKSk7XG5cdFx0XHRcdCQodGhpcykudmFsKG51bWVyYWwoJCh0aGlzKS52YWwoKSkuZm9ybWF0KCcwLDAnKSlcblx0XHRcdH0pO1xuXHRcdFx0Ly8gcHJpY2UgcG9wdXAgaW4gY2F0YWxvZ1xuXHRcdFx0aWYgKCQoJyNwcmljZVBvcHVwT3V0ZXInKS5sZW5ndGgpIHtcblx0XHRcdFx0JCgnI3ByaWNlUG9wdXBPdXRlcicpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCl7XG5cdFx0XHRcdFx0JCh0aGlzKS5wYXJlbnQoKS5maW5kKCcuZm9ybV9fcHJpY2UtcG9wdXAnKS5zbGlkZURvd24oMzAwKTtcblx0XHRcdFx0XHRzZWxlY3RUb2dnbGUoJCgnLmZvcm1fX3NlbGVjdC1vcGVuZWQnKSk7XG5cdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHR9KVxuXHRcdFx0fVxuXHRcdFx0JCgnLmZvcm1fX3ByaWNlLXBvcHVwJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKXtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0XHQgJCgnYm9keScpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCl7XG5cdFx0XHRcdCQoJy5mb3JtX19wcmljZS1wb3B1cCcpLnNsaWRlVXAoMzAwKTtcblx0XHRcdH0pO1xuXHRcdFx0Ly8gY2xlYXIgc2VsZWN0IHBhcmFtXG5cdFx0XHQkKCcuZm9ybV9fc2VsZWN0LWNsZWFyJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKXtcblx0XHRcdFx0Y2xlYXJGb3JtKCQodGhpcykucGFyZW50KCkpO1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9KTtcblx0XHRcdC8vIGNsZWFyIGFsbCBmb3JtXG5cdFx0XHQkKCcuY2xlYXItZmlsdGVyJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKXtcblx0XHRcdFx0JCgnLmN1c3RvbS1zZWxlY3QnKS5lYWNoKGZ1bmN0aW9uKCl7XG5cdFx0XHRcdFx0Y2xlYXJGb3JtKCQodGhpcykpO1xuXHRcdFx0XHR9KTtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fSk7XG5cdFx0XHQvLyBjcmVhdGUgY3VzdG9tIHNlbGVjdHMgZnJvbSBoaWRkZW4gc2VsZWN0IHRhZ1xuXHRcdFx0JCgnLmN1c3RvbS1zZWxlY3QnKS5lYWNoKGZ1bmN0aW9uKCl7XG5cdFx0XHRcdHZhciBtZSA9ICQodGhpcyk7XG5cdFx0XHRcdHZhciB0ZXh0ID0gJyc7XG5cdFx0XHRcdG1lLnByZXYoJy5mb3JtX19oaWRkZW4nKS5maW5kKCdvcHRpb246bm90KDplcSgwKSknKS5lYWNoKGZ1bmN0aW9uKCl7XG5cdFx0XHRcdFx0dmFyIGl0ZW0gPSBtZS5uZXh0KCcuZm9ybV9fc2VsZWN0X19wb3B1cCcpLmZpbmQoJy5mb3JtX19zZWxlY3QtaXRlbScpLmVxKDApLmNsb25lKCk7XG5cdFx0XHRcdFx0aXRlbS5maW5kKCdzcGFuJykudGV4dCgkKHRoaXMpLnRleHQoKSk7XG5cdFx0XHRcdFx0aWYgKCQodGhpcykucHJvcCgnc2VsZWN0ZWQnKSkge1xuXHRcdFx0XHRcdFx0aXRlbS5hZGRDbGFzcygnZm9ybV9fc2VsZWN0LWNoZWNrLXNlbCcpO1xuXHRcdFx0XHRcdFx0aWYoIW1lLnByZXYoJy5mb3JtX19oaWRkZW4nKS5wcm9wKCdtdWx0aXBsZScpKSB7XG5cdFx0XHRcdFx0XHRcdG1lLmZpbmQoJ3NwYW4nKS50ZXh0KCQodGhpcykudGV4dCgpKVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRtZS5uZXh0KCcuZm9ybV9fc2VsZWN0X19wb3B1cCcpLmNoaWxkcmVuKCkuYXBwZW5kKGl0ZW0pO1xuXG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRpZiAobWUucHJldignLmZvcm1fX2hpZGRlbicpLnByb3AoJ211bHRpcGxlJykpIHtcblx0XHRcdFx0XHR0ZXh0ID0gbWUuZmluZCgnc3BhbicpLnRleHQoKTtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyh0ZXh0KTtcblx0XHRcdFx0XHRtZS5maW5kKCdzcGFuJykudGV4dCh0ZXh0LnNwbGl0KCcgJylbMF0gKyAnICgnICsgbWUucHJldignLmZvcm1fX2hpZGRlbicpLmZpbmQoJ29wdGlvbjpzZWxlY3RlZCcpLmxlbmd0aCArICcpJyk7XG5cdFx0XHRcdH1cblx0XHRcdFx0Ly8gcmVtb3ZlIGZpcnN0IHRlbXBsYXRlIG1hcmt1cFxuXHRcdFx0XHRtZS5uZXh0KCcuZm9ybV9fc2VsZWN0X19wb3B1cCcpLmZpbmQoJy5mb3JtX19zZWxlY3QtaXRlbScpLmVxKDApLnJlbW92ZSgpO1xuXHRcdFx0XHRpZiAoJCh0aGlzKS5uZXh0KCcuZm9ybV9fc2VsZWN0X19wb3B1cCcpLmZpbmQoJy5mb3JtX19zZWxlY3QtY2hlY2stc2VsJykubGVuZ3RoKVxuXHRcdFx0XHRcdG1lLmFkZENsYXNzKCdmb3JtX19zZWxlY3QtLWNob29zZW4nKTtcblx0XHRcdH0pO1xuXHRcdFx0LyogZm9ybSBzZWxlY3RzICovXG5cdFx0XHQkKCcuY3VzdG9tLXNlbGVjdCcpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCl7XG5cdFx0XHRcdHNlbGVjdFRvZ2dsZSgkKCcuZm9ybV9fc2VsZWN0LW9wZW5lZCcpLm5vdCgkKHRoaXMpKSk7XG5cdFx0XHRcdHNlbGVjdFRvZ2dsZSgkKHRoaXMpKTtcblx0XHRcdFx0aWYgKCQoJy5mb3JtX19wcmljZS1wb3B1cCcpLmxlbmd0aCkge1xuXHRcdFx0XHRcdCQoJy5mb3JtX19wcmljZS1wb3B1cCcpLnNsaWRlVXAoMzAwKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9KTtcblx0XHRcdC8vIHNob3cgLSBoaWRlIHNlbGVjdHNcblx0XHRcdGZ1bmN0aW9uIHNlbGVjdFRvZ2dsZShzZWxlY3QpIHtcblx0XHRcdFx0c2VsZWN0Lm5leHQoJy5mb3JtX19zZWxlY3RfX3BvcHVwJykuc2xpZGVUb2dnbGUoMjUwKTtcblxuXHRcdFx0XHRzZWxlY3QudG9nZ2xlQ2xhc3MoJ2Zvcm1fX3NlbGVjdC1vcGVuZWQnKTtcblxuXHRcdFx0XHQvL3JlbW92ZSBjaG9vc2VuIGNsYXNzIHdoZW4gb3BlbmluZyB0aGUgc2VsZWN0XG5cdFx0XHRcdGlmIChzZWxlY3QuaGFzQ2xhc3MoJ2Zvcm1fX3NlbGVjdC1vcGVuZWQnKSkge1xuXHRcdFx0XHRcdHNlbGVjdC5yZW1vdmVDbGFzcygnZm9ybV9fc2VsZWN0LS1jaG9vc2VuJyk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0aWYgKCFzZWxlY3QubmV4dCgnLmZvcm1fX3NlbGVjdF9fcG9wdXAnKS5maW5kKCcuZm9ybV9fc2VsZWN0LWNoZWNrLXNlbCcpLmxlbmd0aClcblx0XHRcdFx0XHRcdHNlbGVjdC5yZW1vdmVDbGFzcygnZm9ybV9fc2VsZWN0LS1jaG9vc2VuJyk7XG5cdFx0XHRcdFx0ZWxzZVxuXHRcdFx0XHRcdFx0c2VsZWN0LmFkZENsYXNzKCdmb3JtX19zZWxlY3QtLWNob29zZW4nKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0Ly8gY2xlYXIgZm9ybVxuXHRcdFx0ZnVuY3Rpb24gY2xlYXJGb3JtKGVsZW0pIHtcblx0XHRcdFx0ZWxlbS5yZW1vdmVDbGFzcygnZm9ybV9fc2VsZWN0LS1jaG9vc2VuJyk7XG5cdFx0XHRcdGVsZW0ubmV4dCgnLmZvcm1fX3NlbGVjdF9fcG9wdXAnKS5maW5kKCcuZm9ybV9fc2VsZWN0LWNoZWNrLXNlbCcpLnJlbW92ZUNsYXNzKCdmb3JtX19zZWxlY3QtY2hlY2stc2VsJyk7XG5cdFx0XHRcdGVsZW0ucHJldignLmZvcm1fX2hpZGRlbicpLmZpbmQoJ29wdGlvbicpLnByb3AoJ3NlbGVjdGVkJywgZmFsc2UpO1xuXHRcdFx0XHRlbGVtLnByZXYoJy5mb3JtX19oaWRkZW4nKS52YWwoMCk7XG5cdFx0XHRcdGVsZW0uZmluZCgnc3BhbicpLnRleHQoZWxlbS5wcmV2KCcuZm9ybV9faGlkZGVuJykuZmluZCgnb3B0aW9uJykuZXEoMCkudGV4dCgpKTtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXHRcdFx0JCgnLmZvcm1fX3NlbGVjdC1pdGVtJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKXtcblx0XHRcdFx0Ly8gaW5kZXggb2YgdGhpcyBlbGVtXG5cdFx0XHRcdHZhciBpbmRleCA9ICQodGhpcykucGFyZW50KCkuZmluZCgnLmZvcm1fX3NlbGVjdC1pdGVtJykuaW5kZXgoJCh0aGlzKSkgKyAxO1xuXHRcdFx0XHR2YXIgc2VsZWN0ID0gJCh0aGlzKS5jbG9zZXN0KCcuZm9ybV9fc2VsZWN0LW91dGVyJykuZmluZCgnLmZvcm1fX2hpZGRlbicpO1xuXHRcdFx0XHR2YXIgY3VzdG9tU2VsZWN0ID0gJCh0aGlzKS5jbG9zZXN0KCcuZm9ybV9fc2VsZWN0X19wb3B1cCcpLnByZXYoJy5jdXN0b20tc2VsZWN0Jyk7XG5cdFx0XHRcdHZhciB0ZXh0ID0gJyc7XG5cdFx0XHRcdGlmICghc2VsZWN0LnByb3AoJ211bHRpcGxlJykpIHtcblx0XHRcdFx0XHQkKHRoaXMpLnBhcmVudCgpLmZpbmQoJy5mb3JtX19zZWxlY3QtaXRlbScpLnJlbW92ZUNsYXNzKCdmb3JtX19zZWxlY3QtY2hlY2stc2VsJyk7XG5cdFx0XHRcdFx0c2VsZWN0LmZpbmQoJ29wdGlvbicpLnByb3AoJ3NlbGVjdGVkJywgJCh0aGlzKS5oYXNDbGFzcygnZm9ybV9fc2VsZWN0LWNoZWNrLXNlbCcpKTtcblx0XHRcdFx0XHQkKHRoaXMpLmNsb3Nlc3QoJy5mb3JtX19zZWxlY3RfX3BvcHVwJykuc2xpZGVVcCgyNTApO1xuXHRcdFx0XHRcdGN1c3RvbVNlbGVjdC5maW5kKCdzcGFuJykudGV4dCgkKHRoaXMpLnRleHQoKSk7XG5cdFx0XHRcdFx0Y3VzdG9tU2VsZWN0LnJlbW92ZUNsYXNzKCdmb3JtX19zZWxlY3Qtb3BlbmVkJyk7XG5cdFx0XHRcdFx0Y3VzdG9tU2VsZWN0LnRvZ2dsZUNsYXNzKCdmb3JtX19zZWxlY3QtLWNob29zZW4nLCAkKHRoaXMpLmNsb3Nlc3QoJy5mb3JtX19zZWxlY3RfX3BvcHVwJykuZmluZCgnLmZvcm1fX3NlbGVjdC1jaGVjay1zZWwnKS5sZW5ndGgpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdCQodGhpcykudG9nZ2xlQ2xhc3MoJ2Zvcm1fX3NlbGVjdC1jaGVjay1zZWwnKTtcblx0XHRcdFx0c2VsZWN0LmZpbmQoJ29wdGlvbicpLmVxKGluZGV4KS5wcm9wKCdzZWxlY3RlZCcsICQodGhpcykuaGFzQ2xhc3MoJ2Zvcm1fX3NlbGVjdC1jaGVjay1zZWwnKSk7XG5cdFx0XHRcdHNlbGVjdC50cmlnZ2VyKCdjaGFuZ2UnKTtcblx0XHRcdFx0aWYgKHNlbGVjdC5wcm9wKCdtdWx0aXBsZScpKSB7XG5cdFx0XHRcdFx0dGV4dCA9IGN1c3RvbVNlbGVjdC5maW5kKCdzcGFuJykudGV4dCgpO1xuXHRcdFx0XHRcdGN1c3RvbVNlbGVjdC5maW5kKCdzcGFuJykudGV4dCh0ZXh0LnNwbGl0KCcgJylbMF0gKyAnICgnICsgJCh0aGlzKS5wYXJlbnQoKS5maW5kKCcuZm9ybV9fc2VsZWN0LWNoZWNrLXNlbCcpLmxlbmd0aCArICcpJyk7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fSk7XG5cdFx0XHQkKCdib2R5Jykub24oJ2NsaWNrJywgZnVuY3Rpb24oKXtcblx0XHRcdFx0JCgnLmZvcm1fX3NlbGVjdC1vcGVuZWQnKS5lYWNoKGZ1bmN0aW9uKCl7XG5cdFx0XHRcdFx0c2VsZWN0VG9nZ2xlKCQodGhpcykpO1xuXHRcdFx0XHR9KTtcblx0XHRcdH0pO1xuXHRcdFx0Ly8gZmlsdGVyIG9uIGNhdGFsb2cgcGFnZSAtIHNob3cgbW9yZSBjbGlja1xuXHRcdFx0JCgnI3Nob3ctbW9yZScpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCl7XG5cdFx0XHRcdGlmICgkKHRoaXMpLnBhcmVudCgpLmZpbmQoJy5mb3JtLWZpZWxkc19fc2hvd24nKS5sZW5ndGgpIHtcblx0XHRcdFx0XHQkKHRoaXMpLmZpbmQoJy5mb3JtX193aWRlc2VhcmNoX19taW51cycpLmhpZGUoKTtcblx0XHRcdFx0XHQkKHRoaXMpLmZpbmQoJy5mb3JtX193aWRlc2VhcmNoX19wbHVzJykuc2hvdygpO1xuXHRcdFx0XHRcdCQodGhpcykuZmluZCgnc3BhbicpLnNob3coKTtcblx0XHRcdFx0XHQkKHRoaXMpLnBhcmVudCgpLmZpbmQoJy5mb3JtLWZpZWxkc19fc2hvd24nKS5yZW1vdmVDbGFzcygnZm9ybS1maWVsZHNfX3Nob3duJykuYWRkQ2xhc3MoJ2Zvcm0tZmllbGRzX19oaWRkZW4nKS5mYWRlSW4oMzAwKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQkKHRoaXMpLmZpbmQoJy5mb3JtX193aWRlc2VhcmNoX19taW51cycpLnNob3coKTtcblx0XHRcdFx0XHQkKHRoaXMpLmZpbmQoJy5mb3JtX193aWRlc2VhcmNoX19wbHVzJykuaGlkZSgpO1xuXHRcdFx0XHRcdCQodGhpcykuZmluZCgnc3BhbicpLmhpZGUoKTtcblx0XHRcdFx0XHQkKHRoaXMpLnBhcmVudCgpLmZpbmQoJy5mb3JtLWZpZWxkc19faGlkZGVuJykucmVtb3ZlQ2xhc3MoJ2Zvcm0tZmllbGRzX19oaWRkZW4nKS5hZGRDbGFzcygnZm9ybS1maWVsZHNfX3Nob3duJykuZmFkZUluKDMwMCk7XG5cdFx0XHRcdFx0JCgnLmNhdGFsb2ctZmlsdGVyX19pbm5lcicpLmNzcyh7ZGlzcGxheTogJ2lubGluZSd9KTtcblx0XHRcdFx0XHQkKHRoaXMpLmNzcyh7bWFyZ2luTGVmdDogMH0pO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH0pO1xuXHRcdFx0aWYgKCQoJy5wcmljZS1tYXNrJykubGVuZ3RoKVxuXHRcdFx0XHQkKCcucHJpY2UtbWFzaycpLmlucHV0bWFzayh7XCJtYXNrXCI6IFwiKzkgKDk5OSkgOTk5OTk5OVwifSlcblxuXHR9XG59OyIsIm1vZHVsZS5leHBvcnRzID0ge1xuXHRpbml0OiBmdW5jdGlvbiAoKSB7XG5cdFx0JCgnLm9mZmxpbmUtc2hvcC10cmlnZ2VyJykuY2xpY2soZnVuY3Rpb24gKCkge1xuXHRcdFx0dG9nZ2xlQWN0aXZlQ2xhc3MoJCh0aGlzKS5jbG9zZXN0KCcuYm9vay1iaWtlLXdyYXBwZXInKS5maW5kKCcuYm9vay1iaWtlX190b3AnKSwgJCh0aGlzKSk7XG5cdFx0XHRzaG93T25saW5lU2hvcCgkKHRoaXMpKTtcblx0XHR9KTtcblxuXG5cdFx0JCgnLmVzaG9wLXNob3AtdHJpZ2dlcicpLmNsaWNrKGZ1bmN0aW9uICgpIHtcblx0XHRcdHRvZ2dsZUFjdGl2ZUNsYXNzKCQodGhpcykuY2xvc2VzdCgnLmJvb2stYmlrZS13cmFwcGVyJykuZmluZCgnLmJvb2stYmlrZV9fdG9wJyksICQodGhpcykpO1xuXHRcdFx0c2hvd09mZmxpbmVTaG9wKCQodGhpcykpO1xuXHRcdH0pO1xuXHRcdHZhciBzaG93T2ZmbGluZVNob3AgPSBmdW5jdGlvbiAoZWxlbSkge1xuXHRcdFx0ZWxlbS5jbG9zZXN0KCcuYm9vay1iaWtlLXdyYXBwZXInKS5maW5kKCcuZXNob3AtZm9ybScpLnNob3coKTtcblx0XHRcdGVsZW0uY2xvc2VzdCgnLmJvb2stYmlrZS13cmFwcGVyJykuZmluZCgnLnJlYWwtc2hvcC1mb3JtJykuaGlkZSgpO1xuXHRcdH07XG5cdFx0dmFyIHNob3dPbmxpbmVTaG9wID0gZnVuY3Rpb24gKGVsZW0pIHtcblx0XHRcdGVsZW0uY2xvc2VzdCgnLmJvb2stYmlrZS13cmFwcGVyJykuZmluZCgnLmVzaG9wLWZvcm0nKS5oaWRlKCk7XG5cdFx0XHRlbGVtLmNsb3Nlc3QoJy5ib29rLWJpa2Utd3JhcHBlcicpLmZpbmQoJy5yZWFsLXNob3AtZm9ybScpLnNob3coKTtcblx0XHR9O1xuXG5cdFx0LyoqXG5cdFx0ICogQHBhcmFtIGVsZW1lbnRzQXJyYXkgYXJyYXkgd2l0aCBqUXVlcnkgZWxlbWVudHMgKHR3byB0YWJzIGluIHRoaXMgY2FzZSlcblx0XHQgKiBAcGFyYW0gdGFiRWxlbWVudCBqUXVlcnkgZWxlbWVudCB0aGF0IG5lZWRzIGFuIC5hY3RpdmUgY2xhc3Ncblx0XHQgKi9cblx0XHR2YXIgdG9nZ2xlQWN0aXZlQ2xhc3MgPSBmdW5jdGlvbiAoZWxlbWVudHNBcnJheSwgdGFiRWxlbWVudCkge1xuXHRcdFx0dmFyIGFjdGl2ZUNsYXNzID0gJ2Jvb2stYmlrZV9fdG9wLS1hY3RpdmUnO1xuXG5cdFx0XHRlbGVtZW50c0FycmF5LnJlbW92ZUNsYXNzKGFjdGl2ZUNsYXNzKTtcblx0XHRcdHRhYkVsZW1lbnQuYWRkQ2xhc3MoYWN0aXZlQ2xhc3MpO1xuXHRcdH1cblx0fVxufTsiLCJtb2R1bGUuZXhwb3J0cyA9IHtcblx0aW5pdDogZnVuY3Rpb24gKCkge1xuXHRcdHRoaXMudGFibGV0TWVudU9wZW5lZCA9IGZhbHNlO1xuXHRcdC8vIHRvZ2dsZSB0YWJsZXQgZHJvcGRvd24gbWVudVxuXHRcdCQoJyN0YWJsZXQtaGFtYnVyZ2VyLWJ0bicpLmNsaWNrKGZ1bmN0aW9uICgpIHtcblx0XHRcdHRoaXMudGFibGV0TWVudU9wZW5lZCA9ICF0aGlzLnRhYmxldE1lbnVPcGVuZWQ7XG5cdFx0XHQkKCcjbmF2YmFyLW1lbnUnKS5zbGlkZVRvZ2dsZSgpO1xuXHRcdFx0Ly8gJCgnI3RhYmxldC1oYW1idXJnZXItYnRuJykudG9nZ2xlQ2xhc3MoJ25hdmJhcl9fdGFibGV0LW1lbnUtdG9nZ2xlLS1hY3RpdmUnKTtcblx0XHRcdCQoJyN0YWJsZXQtaGFtYnVyZ2VyLWJ0bicpLnRvZ2dsZUNsYXNzKCduYXZiYXJfX3RhYmxldC1tZW51LXRvZ2dsZS0tYWN0aXZlJyk7XG5cdFx0XHRpZiAodGhpcy50YWJsZXRNZW51T3BlbmVkKSB7XG5cdFx0XHRcdC8vJCgnI3RhYmxldC1oYW1idXJnZXItYnRuJykuZmluZCgnc3ZnJykuaHRtbCgnPHVzZSB4bWxuczp4bGluaz1cImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmtcIiB4bGluazpocmVmPVwiLi4vYXNzZXRzL2ltYWdlcy9pY29uLnN2ZyNpY29uX2Nyb3NzXCI+PC91c2U+Jyk7XG5cdFx0XHRcdCQoJy5oYW1idXJnZXItbm9ybWFsJykudG9nZ2xlKCk7XG5cdFx0XHRcdCQoJy5oYW1idXJnZXItY2xvc2UnKS50b2dnbGUoKTtcblx0XHRcdH1cblx0XHRcdGVsc2Uge1xuXHRcdFx0XHQvLyQoJyN0YWJsZXQtaGFtYnVyZ2VyLWJ0bicpLmZpbmQoJ3N2ZycpLmh0bWwoJzx1c2UgeG1sbnM6eGxpbms9XCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rXCIgeGxpbms6aHJlZj1cIi4uL2Fzc2V0cy9pbWFnZXMvaWNvbi5zdmcjaWNvbl9oYW1idXJnZXJcIj48L3VzZT4nKTtcblx0XHRcdFx0JCgnLmhhbWJ1cmdlci1ub3JtYWwnKS50b2dnbGUoKTtcblx0XHRcdFx0JCgnLmhhbWJ1cmdlci1jbG9zZScpLnRvZ2dsZSgpO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH0pO1xuXG5cdFx0Ly8gdG9nZ2xlIHNlYXJjaCBmaWVsZCBvbiB0YWJsZXRzIGFuZCBzbWFsbCBkZXNrdG9wc1xuXHRcdCQoJyNuYXZiYXJfX3NlYXJjaC1idG4nKS5jbGljayhmdW5jdGlvbiAoKSB7XG5cdFx0XHRhbGVydCgnU2VhcmNoIGJ1dHRvbiBwcmVzc2VkIScpO1xuXHRcdH0pO1xuXG5cdFx0Ly8gdG9nZ2xlIHNvbXd0aGluZyBlbHNlXG5cdFx0JCgnLm1lbnUtbW9iaWxlX19pdGVtLS1tYWluLWNhdGVnb3J5JykuY2xpY2soZnVuY3Rpb24gKCkge1xuXHRcdFx0JCh0aGlzKS5maW5kKCd1bCcpLnNsaWRlVG9nZ2xlKCk7XG5cdFx0fSk7XG5cdH1cbn07XG4iLCJtb2R1bGUuZXhwb3J0cyA9IHtcblx0aW5pdDogZnVuY3Rpb24gKCkge1xuXHRcdC8vIHBvcHVwIGluIG1lbnVcblx0XHQvLyBxdWVzdGlvbiBtYXJrIGNsaWNrIC0gc2hvdyB0aXAgcG9wdXBcblx0XHQkKCcubWFpbl9saXN0X19xdWVzdGlvbicpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcblx0XHRcdHZhciBwYXJlbnQgPSAkKHRoaXMpLmNsb3Nlc3QoJy5tYWluX2xpc3RfX2l0ZW0nKSxcblx0XHRcdFx0cG9wdXAgPSBudWxsLFxuXHRcdFx0XHRxdWVzdGlvbiA9ICQodGhpcyksXG5cdFx0XHRcdHdpZHRoVmFsdWUgPSBxdWVzdGlvbi5vZmZzZXQoKS5sZWZ0IC0gcGFyZW50Lm9mZnNldCgpLmxlZnQ7XG5cdFx0XHQvLyBpZiBsaXN0IGlzIG9uIHBhZ2Vcblx0XHRcdHZhciBwb3B1cEluUGFnZSA9ICQodGhpcykuY2xvc2VzdCgnI21haW5MaXN0JykubGVuZ3RoO1xuXHRcdFx0aWYgKHBvcHVwSW5QYWdlKSB7XG5cdFx0XHRcdHBvcHVwID0gcGFyZW50LmZpbmQoJy5tYWluLWxpc3RfX3BvcHVwJyk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRwb3B1cCA9ICQodGhpcykuY2xvc2VzdCgnLm5hdmJhci1iaWdfX3BvcHVwJykuZmluZCgnLm5hdmJhci1iaWdfX2Rlc2NyJyk7XG5cdFx0XHR9XG5cdFx0XHRpZiAocGFyZW50Lmhhc0NsYXNzKCdtYWluX2xpc3RfX2l0ZW1fc2VsJykpIHtcblx0XHRcdFx0aWYgKHBvcHVwSW5QYWdlKSB7XG5cdFx0XHRcdFx0cGFyZW50LnJlbW92ZUNsYXNzKCdtYWluX2xpc3RfX2l0ZW1fc2VsJyk7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHBhcmVudC5wYXJlbnQoKS5maW5kKCcubWFpbl9saXN0X19pdGVtX3NlbCcpLnJlbW92ZUNsYXNzKCdtYWluX2xpc3RfX2l0ZW1fc2VsJyk7XG5cdFx0XHRcdHBhcmVudC5hZGRDbGFzcygnbWFpbl9saXN0X19pdGVtX3NlbCcpO1xuXHRcdFx0XHRpZiAocG9wdXBJblBhZ2UpIHtcblx0XHRcdFx0XHQvLyBjaGVjayBpZiBwb3B1cCBmaXRzIGluIHRoZSB3aW5kb3dcblx0XHRcdFx0XHRpZiAocG9wdXAub3V0ZXJXaWR0aCgpICsgcGFyc2VJbnQocXVlc3Rpb24ub2Zmc2V0KCkubGVmdCkgPiAkKCdib2R5Jykud2lkdGgoKSAtIDMwKSB7XG5cdFx0XHRcdFx0XHQvLyBmbG9hdCB0byB0aGUgcmlnaHQgc2lkZVxuXHRcdFx0XHRcdFx0cG9wdXAuY3NzKHtsZWZ0OiB3aWR0aFZhbHVlICsgcXVlc3Rpb24ud2lkdGgoKSAtIHBvcHVwLm91dGVyV2lkdGgoKX0pO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHQvLyBmbG9hdCB0byB0aGUgbGVmdCBzaWRlXG5cdFx0XHRcdFx0XHRwb3B1cC5jc3Moe2xlZnQ6IHdpZHRoVmFsdWV9KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0XHQvLyB0b2RvIC0gYWpheCByZXF1ZXN0XG5cdFx0XHRcdFx0Ly8gJCgnI3BvcHVwTGlzdCAubmF2YmFyLWJpZ19fZGVzY3InKSAtIGFwcGVuZCBkYXRhIHRvIHRoaXMgZGl2XG5cdFx0XHRcdFx0cG9wdXAuc2hvdygpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fSk7XG5cdFx0Ly8gY2xvc2UgcG9wdXBzIG9uIGJvZHkgY2xpY2tcblx0XHQkKCdib2R5Jykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuXHRcdFx0JCgnI21haW5MaXN0JykuZmluZCgnLm1haW5fbGlzdF9faXRlbV9zZWwnKS5yZW1vdmVDbGFzcygnbWFpbl9saXN0X19pdGVtX3NlbCcpO1xuXHRcdH0pO1xuXHRcdCQoJyNtYWluTGlzdCAubWFpbi1saXN0X19wb3B1cCcpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9KTtcblx0XHQvLyB0aXAgcG9wdXAgaGlkZVxuXHRcdCQoJy5tYWluLWxpc3RfX2Nsb3NlJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuXHRcdFx0dmFyIHBhcmVudCA9ICQodGhpcykuY2xvc2VzdCgnLm1haW5fbGlzdF9faXRlbScpO1xuXHRcdFx0cGFyZW50LnJlbW92ZUNsYXNzKCdtYWluX2xpc3RfX2l0ZW1fc2VsJyk7XG5cdFx0fSk7XG5cdFx0Ly8gdmlkZW8gcGxheWVyIGZvciBtYWluIHZpZGVvXG5cdFx0ZnVuY3Rpb24gdmlkZW9QbGF5ZXIoaWQsIHRyaWdnZXIpIHtcblx0XHRcdHZhciBtZSA9IHRoaXM7XG5cdFx0XHR0aGlzLnZpZGVvUGxheSA9IG51bGw7XG5cdFx0XHQvLyBjcmVhdGUgcGxheWVyXG5cdFx0XHR0aGlzLmNyZWF0ZSA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0JCgnIycgKyBpZCkuYXBwZW5kKCc8c291cmNlIHNyYz1cIicgKyB0cmlnZ2VyLmRhdGEoJ3VybCcpICsgJy5tcDRcIiB0eXBlPVwidmlkZW8vbXA0XCI+Jyk7XG5cdFx0XHRcdCQoJyMnICsgaWQpLmFwcGVuZCgnPHNvdXJjZSBzcmM9XCInICsgdHJpZ2dlci5kYXRhKCd1cmwnKSArICcud2VibVwiIHR5cGU9XCJ2aWRlby93ZWJtXCI+Jyk7XG5cdFx0XHRcdG1lLnZpZGVvUGxheSA9IHZpZGVvanMoaWQsIHtcblx0XHRcdFx0XHR3aWR0aDogNzQwLFxuXHRcdFx0XHRcdGhlaWdodDogNTAwLFxuXHRcdFx0XHRcdGF1dG9wbGF5OiB0cnVlLFxuXHRcdFx0XHRcdHByZWxvYWQ6IGZhbHNlLFxuXHRcdFx0XHRcdGNvbnRyb2xzOiB0cnVlXG5cdFx0XHRcdH0sIGZ1bmN0aW9uICgpIHtcblxuXHRcdFx0XHR9KTtcblx0XHRcdH07XG5cdFx0XHR0aGlzLnN0b3AgPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdGlmIChtZS52aWRlb1BsYXkpXG5cdFx0XHRcdFx0bWUudmlkZW9QbGF5LnBhdXNlKCk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gdmlkZW9DYWxsKGJsb2NrLCB0cmlnZ2VyKSB7XG5cdFx0XHR2YXIgdmlkZW8gPSBuZXcgdmlkZW9QbGF5ZXIoYmxvY2ssIHRyaWdnZXIpO1xuXHRcdFx0dHJpZ2dlci5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdCQoJy5iZy1sYXllcicpLmZhZGVJbigzMDApO1xuXHRcdFx0XHQkKCcjdmlkZW9Qb3B1cCcpLmZhZGVJbigzMDApO1xuXHRcdFx0XHR2aWRlby5jcmVhdGUoKTtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fSk7XG5cdFx0XHQkKCcjdmlkZW9Qb3B1cENsb3NlJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuXHRcdFx0XHQkKCcjdmlkZW9Qb3B1cCcpLmZhZGVPdXQoMzAwKTtcblx0XHRcdFx0JCgnLmJnLWxheWVyJykuZmFkZU91dCgzMDApO1xuXHRcdFx0XHR2aWRlby5zdG9wKCk7XG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH0pO1xuXHRcdFx0JCgnI3ZpZGVvUG9wdXAnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuXHRcdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xuXHRcdFx0fSk7XG5cdFx0XHQkKCdib2R5Jykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRpZiAoJCgnI3ZpZGVvUG9wdXAnKS5pcygnOnZpc2libGUnKSkge1xuXHRcdFx0XHRcdCQoJyN2aWRlb1BvcHVwJykuZmFkZU91dCgzMDApO1xuXHRcdFx0XHRcdCQoJy5iZy1sYXllcicpLmZhZGVPdXQoMzAwKTtcblx0XHRcdFx0XHR2aWRlby5zdG9wKCk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdGlmICgkKCcjcGxheWVyX3RyaWdnZXInKS5sZW5ndGgpXG5cdFx0XHR2aWRlb0NhbGwoJ2Fib3V0VmlkZW8nLCAkKCcjcGxheWVyX3RyaWdnZXInKSk7XG5cdFx0aWYgKCQoJyN2aWRlb0NhcmRDYWxsJykubGVuZ3RoKVxuXHRcdFx0dmlkZW9DYWxsKCdhYm91dFZpZGVvJywgJCgnI3ZpZGVvQ2FyZENhbGwnKSk7XG5cblxuXHRcdHZhciB0aW1lID0gbnVsbDtcblx0XHQvLyBzaG93IHdpZGUgdmlldyBvbiBjYXJkIGNsaWNrXG5cdFx0JCgnYm9keScpLm9uKHtcblx0XHRcdFx0bW91c2VlbnRlcjogZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdHZhciBtZSA9ICQodGhpcyk7XG5cdFx0XHRcdFx0JCh0aGlzKS5maW5kKCcuY2FyZF9fcmV2aWV3Jykuc2hvdygpO1xuXHRcdFx0XHRcdHRpbWUgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRcdG1lLmZpbmQoJy5jYXJkX19yZXZpZXcnKS5mYWRlT3V0KDMwMCk7XG5cdFx0XHRcdFx0fSwgMjAwMCk7XG5cblx0XHRcdFx0fSxcblx0XHRcdFx0bW91c2VsZWF2ZTogZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdGNsZWFyVGltZW91dCh0aW1lKTtcblx0XHRcdFx0XHQkKHRoaXMpLmZpbmQoJy5jYXJkX19yZXZpZXcnKS5hZGRDbGFzcygnY2FyZF9fcmV2aWV3LXNob3cnKS5oaWRlKCk7XG5cdFx0XHRcdH1cblx0XHRcdH0sICcuY2FyZC0tc2ltcGxlOm5vdChcIi5jYXJkLXZlcnRpY2FsXCIpJ1xuXHRcdCk7XG5cdFx0JCgnYm9keScpLm9uKFxuXHRcdFx0e1xuXHRcdFx0XHRtb3VzZWVudGVyOiBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0JCh0aGlzKS5jbG9zZXN0KCcuY2FyZCcpLmZpbmQoJy5jYXJkX19yZXZpZXcnKVxuXHRcdFx0XHRcdFx0LmFkZENsYXNzKCdjYXJkX19yZXZpZXctc2hvdycpLnNob3coKTtcblx0XHRcdFx0XHRjbGVhclRpbWVvdXQodGltZSk7XG5cdFx0XHRcdFx0JCh0aGlzKS5maW5kKCcuY2FyZF9fcmV2aWV3X3RleHQnKS5hZGRDbGFzcygnY2FyZF9fcmV2aWV3X3RleHQtaG92ZXInKTtcblx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdG1vdXNlbGVhdmU6IGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHQkKHRoaXMpLmNsb3Nlc3QoJy5jYXJkJykuZmluZCgnLmNhcmRfX3JldmlldycpLmhpZGUoKTtcblx0XHRcdFx0XHQkKHRoaXMpLmZpbmQoJy5jYXJkX19yZXZpZXdfdGV4dCcpLnJlbW92ZUNsYXNzKCdjYXJkX19yZXZpZXdfdGV4dC1ob3ZlcicpO1xuXHRcdFx0XHR9XG5cdFx0XHR9LCAnLmNhcmRfX3Jldmlld3MtaG92ZXInXG5cdFx0KTtcblxuXHRcdC8vIGNvbG9yIGNob29zaW5nXG5cdFx0JCgnYm9keScpLm9uKHtcblx0XHRcdGNsaWNrOiBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdCQodGhpcykuY2xvc2VzdCgnLmNhcmRfcGhvdG8tdmFycycpLmZpbmQoJy5jYXJkX3Bob3RvLXZhcnNfX2l0ZW0tc2VsJykucmVtb3ZlQ2xhc3MoJ2NhcmRfcGhvdG8tdmFyc19faXRlbS1zZWwnKTtcblx0XHRcdFx0JCh0aGlzKS5hZGRDbGFzcygnY2FyZF9waG90by12YXJzX19pdGVtLXNlbCcpO1xuXHRcdFx0XHQkKHRoaXMpLmNsb3Nlc3QoJy5jYXJkX3Bob3RvJykuZmluZCgnLmNhcmRfcGhvdG8tcGljJykucHJvcCgnc3JjJywgJCh0aGlzKS5wcm9wKCdocmVmJykpO1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cdFx0fSwgJy5jYXJkX3Bob3RvLXZhcnNfX2l0ZW0nKTtcblxuXHRcdC8vIHNob3cgYnV5IHBvcHVwXG5cdFx0JCgnYm9keScpLm9uKHtcblx0XHRcdGNsaWNrOiBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdCQoJy5iZy1sYXllcicpLmZhZGVJbigzMDApO1xuXHRcdFx0XHR2YXIgcG9wdXAgPSAkKCcjYnV5UG9wdXAnKTtcblx0XHRcdFx0cG9wdXAuY3NzKHtcblx0XHRcdFx0XHRkaXNwbGF5OiAnYmxvY2snLFxuXHRcdFx0XHRcdHZpc2liaWxpdHk6ICdoaWRkZW4nLFxuXHRcdFx0XHRcdHRvcDogJCh3aW5kb3cpLnNjcm9sbFRvcCgpICsgJCh3aW5kb3cpLmhlaWdodCgpIC8gMiAtICQoJyNidXlQb3B1cCcpLm91dGVySGVpZ2h0KCkgLyAyXG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRpZiAoJCgnI3ZpZGVvUGFnZVBvcHVwJykubGVuZ3RoKSB7XG5cdFx0XHRcdFx0JCgnI3ZpZGVvUGFnZVBvcHVwJykuZmluZCgnaWZyYW1lJykucmVtb3ZlKCk7XG5cdFx0XHRcdFx0JCgnI3ZpZGVvUGFnZVBvcHVwJykuZmFkZU91dCgzMDApO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHBvcHVwLmNzcyh7ZGlzcGxheTogJ25vbmUnLCB2aXNpYmlsaXR5OiAndmlzaWJsZSd9KTtcblx0XHRcdFx0cG9wdXAuZmFkZUluKDMwMCwgZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdGlmICghcG9wdXAuZmluZCgnLnNsaWNrLXNsaWRlcicpLmxlbmd0aCkge1xuXHRcdFx0XHRcdFx0dmFyIGJ1eUdhbGxlcnkgPSByZXF1aXJlKCcuLi9jYXJkL2JpZ0NhcmRHYWxsZXJ5Jyk7XG5cdFx0XHRcdFx0XHRidXlHYWxsZXJ5LmluaXQoKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cdFx0fSwgJy5jYXJkLS1zaW1wbGUgLmZvcm0tY29udHJvbCcpO1xuXHRcdC8vIGNsb3NlIHBvcHVwXG5cdFx0JCgnLnBvcHVwX19jbG9zZScpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcblx0XHRcdCQodGhpcykucGFyZW50KCkuZmFkZU91dCgzMDApO1xuXHRcdFx0JCgnLmJnLWxheWVyJykuZmFkZU91dCgzMDApO1xuXHRcdH0pO1xuXHRcdCQoJy5nLXBvcHVwJykubm90KFwiI2NpdHlQb3B1cFwiKS5vbignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuXHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHR9KTtcblx0XHQkKGRvY3VtZW50KS5rZXl1cChmdW5jdGlvbihlKSB7XG5cdFx0XHRpZiAoZS5rZXlDb2RlID09IDI3KSB7XG5cdFx0XHRcdGlmICgkKCcuZy1wb3B1cDp2aXNpYmxlJykubGVuZ3RoIHx8ICQoJy5wb3B1cDp2aXNpYmxlJykubGVuZ3RoKSB7XG5cdFx0XHRcdFx0JCgnLmJnLWxheWVyJykuZmFkZU91dCgzMDApO1xuXHRcdFx0XHRcdCQoJy5wb3B1cCwgLmctcG9wdXAnKS5mYWRlT3V0KDMwMCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9KTtcblx0XHQkKCcuYmctbGF5ZXInKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG5cdFx0XHQkKCcuYmctbGF5ZXInKS5mYWRlT3V0KDMwMCk7XG5cdFx0XHQkKCcucG9wdXAsIC5nLXBvcHVwJykuZmFkZU91dCgzMDApO1xuXHRcdH0pO1xuXHRcdC8vIHNob3cgc21hbGwgcG9wdXBcblx0XHRmdW5jdGlvbiBzbWFsbFBvcHVwU2hvdyhpZCkge1xuXHRcdFx0JCgnLmJnLWxheWVyJykuZmFkZUluKDMwMCk7XG5cdFx0XHR2YXIgdG9wR2FwID0gJCh3aW5kb3cpLnNjcm9sbFRvcCgpICsgJCh3aW5kb3cpLmhlaWdodCgpIC8gMiAtICQoJyMnICsgaWQpLm91dGVySGVpZ2h0KCkgLyAyO1xuXHRcdFx0dG9wR2FwID0gKHRvcEdhcCA8IDApID8gJzIwcHgnIDogdG9wR2FwO1xuXHRcdFx0JCgnIycgKyBpZCkuY3NzKHt0b3A6IHRvcEdhcH0pLmZhZGVJbigzMDApO1xuXHRcdH1cblx0XHQvLyBzbWFsbCBidXkgcG9wdXAgaW4gY2FyZFxuXHRcdGlmICgkKCcjYnV5U21hbGxQb3B1cFRyaWdnZXInKS5sZW5ndGgpIHtcblx0XHRcdCQoJ2JvZHknKS5vbih7XG5cdFx0XHRcdGNsaWNrOiBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0c21hbGxQb3B1cFNob3coJ2J1eVNtYWxsUG9wdXAnKTtcblx0XHRcdFx0XHRcdC8vIHRvZG8gLSBhamF4IHJlcXVlc3QgLSBwdXQgdG8gdGhlIGJhc2tldCwgYXBwZW5kIGdvb2RpZSBpbmZvXG5cdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHR9XG5cdFx0XHR9LCAnI2J1eVNtYWxsUG9wdXBUcmlnZ2VyJyk7XG5cdFx0fVxuXHRcdC8vIDEgY2xpY2sgcG9wdXBcblx0XHRpZiAoJCgnLmJ1eU9uZUNsaWNrVHJpZ2dlcicpLmxlbmd0aCkge1xuXHRcdFx0JCgnYm9keScpLm9uKHtcblx0XHRcdFx0Y2xpY2s6IGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRzbWFsbFBvcHVwU2hvdygnb25lQ2xpY2tQb3B1cCcpO1xuXHRcdFx0XHRcdC8vIHRvZG8gLSBhamF4IHJlcXVlc3QgLSBhcHBlbmQgZ29vZGllIGluZm9cblx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdH1cblx0XHRcdH0sICcuYnV5T25lQ2xpY2tUcmlnZ2VyJyk7XG5cdFx0fVxuXHRcdC8vIGNyZWRpdCBwb3B1cFxuXHRcdGlmICgkKCcjY3JlZGl0UG9wdXBUcmlnZ2VyJykubGVuZ3RoKSB7XG5cdFx0XHQkKCdib2R5Jykub24oe1xuXHRcdFx0XHRjbGljazogZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdHNtYWxsUG9wdXBTaG93KCdjcmVkaXRQb3B1cCcpO1xuXHRcdFx0XHRcdC8vIHRvZG8gLSBjcmVkaXQgcG9wdXAsIGFwcGVuZCBnb29kaWUgaW5mb1xuXHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0fVxuXHRcdFx0fSwgJyNjcmVkaXRQb3B1cFRyaWdnZXInKTtcblx0XHR9XG5cdFx0Ly8gcHJlb3JkZXIgcG9wdXBcblx0XHRpZiAoJCgnI3ByZW9yZGVyVHJpZ2dlcicpLmxlbmd0aCkge1xuXHRcdFx0JCgnYm9keScpLm9uKHtcblx0XHRcdFx0Y2xpY2s6IGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRzbWFsbFBvcHVwU2hvdygncHJlb3JkZXJQb3B1cCcpO1xuXHRcdFx0XHRcdC8vIHRvZG8gLSBwcmVvcmRlciBwb3B1cCwgYXBwZW5kIGdvb2RpZSBpbmZvXG5cdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHR9XG5cdFx0XHR9LCAnI3ByZW9yZGVyVHJpZ2dlcicpO1xuXHRcdH1cblx0XHQvLyBhdXRvY29tcGxldGUgaW4gY2l0eSBwb3B1cFxuXHRcdGlmICgkKCcjY2l0eVBvcHVwVHJpZ2dlcicpLmxlbmd0aCkge1xuXHRcdFx0JCgnYm9keScpLm9uKHtcblx0XHRcdFx0Y2xpY2s6IGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRzbWFsbFBvcHVwU2hvdygnY2l0eVBvcHVwJyk7XG5cdFx0XHRcdFx0JCgnI2Nob29zZUNpdHknKS50cmlnZ2VyKCdmb2N1cycpLnNlbGVjdCgpO1xuXHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0fVxuXHRcdFx0fSwgJyNjaXR5UG9wdXBUcmlnZ2VyJyk7XG5cblx0XHRcdCQud2lkZ2V0KCBcImN1c3RvbS5jYXRjb21wbGV0ZVwiLCAkLnVpLmF1dG9jb21wbGV0ZSwge1xuXHRcdFx0XHRfY3JlYXRlOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHR0aGlzLl9zdXBlcigpO1xuXHRcdFx0XHRcdHRoaXMud2lkZ2V0KCkubWVudSggXCJvcHRpb25cIiwgXCJpdGVtc1wiLCBcIj4gOm5vdCgudWktYXV0b2NvbXBsZXRlLWNhdGVnb3J5KVwiICk7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdF9yZW5kZXJJdGVtOiBmdW5jdGlvbih1bCwgaXRlbSkge1xuXHRcdFx0XHRcdHJldHVybiAkKCBcIjxsaT5cIiApXG5cdFx0XHRcdFx0XHQuYXBwZW5kKCBpdGVtLmxhYmVsICsgJyZuYnNwOzxzcGFuIGNsYXNzPVwidWktbWVudS1yZWdpb25cIj4nICsgaXRlbS5yZWdpb24gKyAnPC9zcGFuPicpXG5cdFx0XHRcdFx0XHQuYXBwZW5kVG8oIHVsICk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdFx0aWYgKCQoJyNjaG9vc2VDaXR5JykubGVuZ3RoKSB7XG5cdFx0XHRcdCQoJyNjaG9vc2VDaXR5JykuY2F0Y29tcGxldGUoe1xuXHRcdFx0XHRcdC8vIHRoZSBzb3VyY2Vcblx0XHRcdFx0XHRzb3VyY2U6IGZ1bmN0aW9uKHJlcXVlc3QsIHJlc3BvbnNlKXtcblx0XHRcdFx0XHRcdC8vIGRhdGEgZm9ybWF0OiBkZWxldGUgdGhpcyBzdGF0ZW1lbnRcblx0XHRcdFx0XHRcdHZhciBkYXRhID0gW1xuXHRcdFx0XHRcdFx0XHR7bGFiZWw6IFwi0JzQvtGB0LrQstCwXCIsIHJlZ2lvbjogXCJcIiwgdmFsdWU6ICcnfSxcblx0XHRcdFx0XHRcdFx0e2xhYmVsOiBcItCc0L7RgdCw0LvRjNGB0LpcIiwgcmVnaW9uOiBcItCa0LDQu9GD0LbRgdC60LDRjyDQvtCx0LvQsNGB0YLRjFwiLCB2YWx1ZTogJyd9LFxuXHRcdFx0XHRcdFx0XHR7bGFiZWw6IFwi0JrQsNC70YPQs9CwXCIsIHJlZ2lvbjogXCLQmtCw0LvRg9C20YHQutCw0Y8g0L7QsdC70LDRgdGC0YxcIiwgdmFsdWU6ICcnfSxcblx0XHRcdFx0XHRcdFx0e2xhYmVsOiBcItCa0YDQsNGB0L3QvtGP0YDRgdC6XCIsIHJlZ2lvbjogXCLQmtGA0LDRgdC90L7Rj9GA0YHQutC40Lkg0LrRgNCw0LlcIiwgdmFsdWU6ICcnfSxcblx0XHRcdFx0XHRcdFx0e2xhYmVsOiBcItCa0LvQuNC80L7QstGB0LpcIiwgcmVnaW9uOiBcItCa0LDQu9GD0LbRgdC60LDRjyDQvtCx0LsuXCIsIHZhbHVlOiAnJ31dO1xuXHRcdFx0XHRcdFx0cmVzcG9uc2UoZGF0YSk7XG5cdFx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdFx0XHQvLyB0b2RvIC0gYWpheCByZXF1ZXN0XG5cdFx0XHRcdFx0XHRqUXVlcnkuZ2V0KFwiL1wiLCB7XG5cdFx0XHRcdFx0XHRcdHF1ZXJ5OiByZXF1ZXN0LnRlcm1cblx0XHRcdFx0XHRcdH0sIGZ1bmN0aW9uIChkYXRhKSB7XG5cdFx0XHRcdFx0XHRcdHJlc3BvbnNlKGRhdGEpO1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRhcHBlbmRUbzogJyNjaXR5UG9wdXAnLFxuXHRcdFx0XHRcdG1pbkxlbmd0aDogMyxcblx0XHRcdFx0XHRzZWxlY3Q6IGZ1bmN0aW9uKGV2ZW50LCB1aSl7XG5cdFx0XHRcdFx0XHQkKCcjY2l0eVBvcHVwJykuZmFkZU91dCgzMDApO1xuXHRcdFx0XHRcdFx0JCgnLmJnLWxheWVyJykuZmFkZU91dCgzMDApO1xuXHRcdFx0XHRcdFx0JCgnI2RlbGl2ZXJ5RGV0YWlscycpLnNob3coKTtcblx0XHRcdFx0XHRcdCQoJyNmcmVlRGVsaXZlcnknKS5oaWRlKCk7XG5cdFx0XHRcdFx0XHQkKCcjY2l0eVBvcHVwVHJpZ2dlcicpLmFkZENsYXNzKCdub2JvcmRlcicpLmh0bWwoJ9CT0L7RgNC+0LQ6IDxzdHJvbmcgY2xhc3M9XCJib3JkZXItc3R5bGVcIj4nICsgdWkuaXRlbS5sYWJlbCArICc8L3N0cm9uZz4nKVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSlcblx0XHRcdH1cblx0XHRcdGlmKCQoJyNzaG93U29jaWFscycpLmxlbmd0aCkge1xuXHRcdFx0XHQkKCcjc2hvd1NvY2lhbHMnKS5vbignY2xpY2snLCBmdW5jdGlvbigpe1xuXHRcdFx0XHRcdCQoJyNzb2NpYWxzUG9wdXAnKS5mYWRlSW4oMzAwKTtcblx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXG5cdFx0fVxuXHR9XG59OyIsIm1vZHVsZS5leHBvcnRzID0ge1xuXHRpbml0OiBmdW5jdGlvbiAoKSB7XG5cdFx0Ly8gc2xpZGUgYmlrZXMgaW4gdGhlIHJlY29tbWVuZGVkIGJsb2NrICh3aGVuIGJpa2UgaXMgbWlzc2luZyBvbiB0aGUgcHJvZHVjdCBwYWdlKVxuXHRcdCQoJy5iaWtlLW1pc3NpbmcgLmJvb2stYmlrZV9fY2VudGVyJykuc2xpY2soe1xuXHRcdFx0c2xpZGVzVG9TaG93OiAzLFxuXHRcdFx0c2xpZGVzVG9TY3JvbGw6IDEsXG5cdFx0XHR2ZXJ0aWNhbDogdHJ1ZSxcblx0XHRcdGluZmluaXRlOiB0cnVlLFxuXHRcdFx0ZG90czogZmFsc2UsXG5cdFx0XHRhcnJvd3M6IHRydWUsXG5cdFx0XHRkcmFnZ2FibGU6IGZhbHNlLFxuXHRcdFx0Ly8gYXV0b3BsYXk6IHRydWUsXG5cdFx0XHQvLyBhdXRvcGxheVNwZWVkOiAzMDAwLFxuXHRcdFx0cGF1c2VPbkhvdmVyOiB0cnVlLFxuXHRcdFx0cHJldkFycm93OiAkKCcjYmlrZS1taXNzaW5nX3ByZXYnKSxcblx0XHRcdG5leHRBcnJvdzogJCgnI2Jpa2UtbWlzc2luZ19uZXh0Jylcblx0XHR9KTtcblx0fVxufTtcblxuIiwibW9kdWxlLmV4cG9ydHMgPSB7XG5cdGluaXQ6IGZ1bmN0aW9uICgpIHtcblx0XHQkKCcuY29tcGFyZS1zbGlkZXInKS5jc3Moe29wYWNpdHk6IDF9KTtcblx0XHQvLyBoZWlnaHRzXG5cdFx0ZnVuY3Rpb24gY29tcGFyZWhlaWdodCgpIHtcblx0XHRcdCQoJy5jb21wYXJlLXRhYmxlX19saXN0JykuZXEoMCkuZmluZCgnbGknKS5lYWNoKGZ1bmN0aW9uKCl7XG5cdFx0XHRcdHZhciBudW1iZXIgPSAkKHRoaXMpLmNsb3Nlc3QoJy5jb21wYXJlLXRhYmxlX19saXN0JykuZmluZCgnbGknKS5pbmRleCgkKHRoaXMpKTtcblxuXHRcdFx0XHR2YXIgaGVpZ2h0ID0gJCh0aGlzKS5vdXRlckhlaWdodCgpO1xuXG5cdFx0XHRcdCQoJy5jb21wYXJlLXRhYmxlX19saXN0Jykubm90KCQodGhpcykucGFyZW50KCkpLmVhY2goZnVuY3Rpb24oKXtcblx0XHRcdFx0XHRpZigkKHRoaXMpLmZpbmQoJ2xpJykuZXEobnVtYmVyKS5vdXRlckhlaWdodCgpID49IGhlaWdodCkge1xuXHRcdFx0XHRcdFx0aGVpZ2h0ID0gJCh0aGlzKS5maW5kKCdsaScpLmVxKG51bWJlcikub3V0ZXJIZWlnaHQoKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXHRcdFx0XHQkKCcuY29tcGFyZS10YWJsZV9fbGlzdCcpLmVhY2goZnVuY3Rpb24oKXtcblx0XHRcdFx0XHQkKHRoaXMpLmZpbmQoJ2xpJykuZXEobnVtYmVyKS5oZWlnaHQoaGVpZ2h0IC0gMTApO1xuXHRcdFx0XHR9KVxuXHRcdFx0fSk7XG5cdFx0fVxuXG5cdFx0Y29tcGFyZWhlaWdodCgpO1xuXG5cdFx0JCgnLmNvbXBhcmUtdGFibGVfX2xpc3QgbGknKS5vbignbW91c2VvdmVyJywgZnVuY3Rpb24oKXtcblx0XHRcdHZhciBudW1iZXIgPSAkKHRoaXMpLmNsb3Nlc3QoJy5jb21wYXJlLXRhYmxlX19saXN0JykuZmluZCgnbGknKS5pbmRleCgkKHRoaXMpKTtcblx0XHRcdCQoJy5jb21wYXJlLXRhYmxlX19saXN0JykuZWFjaChmdW5jdGlvbigpe1xuXHRcdFx0XHQkKHRoaXMpLmZpbmQoJ2xpJykuZXEobnVtYmVyKS5hZGRDbGFzcygnY29tcGFyZS10YWJsZV9fbGlzdC1ob3ZlcicpO1xuXHRcdFx0fSlcblx0XHR9KS5vbignbW91c2VvdXQnLCBmdW5jdGlvbigpe1xuXHRcdFx0dmFyIG51bWJlciA9ICQodGhpcykuY2xvc2VzdCgnLmNvbXBhcmUtdGFibGVfX2xpc3QnKS5maW5kKCdsaScpLmluZGV4KCQodGhpcykpO1xuXHRcdFx0JCgnLmNvbXBhcmUtdGFibGVfX2xpc3QnKS5lYWNoKGZ1bmN0aW9uKCl7XG5cdFx0XHRcdCQodGhpcykuZmluZCgnbGknKS5lcShudW1iZXIpLnJlbW92ZUNsYXNzKCdjb21wYXJlLXRhYmxlX19saXN0LWhvdmVyJyk7XG5cdFx0XHR9KVxuXHRcdH0pO1xuXHRcdC8vIHN0aWNrIGhlYWRcblx0XHQkKCcjY29tcGFyZUhlYWRlcicpLnN0aWNrX2luX3BhcmVudCgpLm9uKFwic3RpY2t5X2tpdDpib3R0b21cIiwgZnVuY3Rpb24oZSkge1xuXHRcdFx0JChlLnRhcmdldCkucmVtb3ZlQ2xhc3MoJ2NvbXBhcmUtdGFibGUtLWJvZHktZycpLmFkZENsYXNzKCdjb21wYXJlLXRhYmxlLS1ib2R5LW5vJyk7XG5cdFx0fSkub24oXCJzdGlja3lfa2l0OnVuYm90dG9tXCIsIGZ1bmN0aW9uKGUpIHtcblx0XHRcdCQoZS50YXJnZXQpLmFkZENsYXNzKCdjb21wYXJlLXRhYmxlLS1ib2R5LWcnKS5yZW1vdmVDbGFzcygnY29tcGFyZS10YWJsZS0tYm9keS1ubycpO1xuXHRcdH0pLm9uKFwic3RpY2t5X2tpdDp1bnN0aWNrXCIsIGZ1bmN0aW9uKGUpIHtcblx0XHRcdCQoZS50YXJnZXQpLnJlbW92ZUNsYXNzKCdjb21wYXJlLXRhYmxlLS1ib2R5LWcnKS5hZGRDbGFzcygnY29tcGFyZS10YWJsZS0tYm9keS1ubycpO1xuXHRcdH0pLm9uKFwic3RpY2t5X2tpdDpzdGlja1wiLCBmdW5jdGlvbihlKSB7XG5cdFx0XHQkKGUudGFyZ2V0KS5hZGRDbGFzcygnY29tcGFyZS10YWJsZS0tYm9keS1nJykucmVtb3ZlQ2xhc3MoJ2NvbXBhcmUtdGFibGUtLWJvZHktbm8nKTtcblx0XHR9KTtcblxuXHRcdC8vIHNpZGViYXIgYW5kIGJ1dHRvbnMgc3RpY2tcblx0XHQkKCcjc2lkZWJhcjInKS5zdGlja19pbl9wYXJlbnQoKTtcblxuXHRcdCQoJyNjb21wYXJlUmlnaHQnKS5zdGlja19pbl9wYXJlbnQoe29mZnNldF90b3A6IDUwIH0pO1xuXHRcdCQoJyNjb21wYXJlTGVmdCcpLnN0aWNrX2luX3BhcmVudCh7b2Zmc2V0X3RvcDogNTB9KTtcblxuXHRcdCQoJyNjb21wYXJlT3ZlcmFsbCcpLm9uKCdzY3JvbGwnLCBmdW5jdGlvbigpe1xuXHRcdFx0aWYoJCgnI2NvbXBhcmVIZWFkZXInKS5jc3MoJ3Bvc2l0aW9uJykgPT09ICdmaXhlZCcpIHtcblx0XHRcdFx0JCgnI2NvbXBhcmVIZWFkZXInKS5jc3Moe2xlZnQ6IC0kKHRoaXMpLnNjcm9sbExlZnQoKX0pO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHRcdC8vIGJ1dHRvbnMgY2xpY2tcblx0XHQkKCcjY29tcGFyZVJpZ2h0Jykub24oJ2NsaWNrJywgZnVuY3Rpb24oKXtcblx0XHRcdCQoJyNjb21wYXJlT3ZlcmFsbCcpLmFuaW1hdGUoe3Njcm9sbExlZnQ6ICQoJyNjb21wYXJlT3ZlcmFsbCcpLnNjcm9sbExlZnQoKSArIDMwMH0sIDMwMClcblx0XHR9KTtcblx0XHQkKCcjY29tcGFyZUxlZnQnKS5vbignY2xpY2snLCBmdW5jdGlvbigpe1xuXHRcdFx0JCgnI2NvbXBhcmVPdmVyYWxsJykuYW5pbWF0ZSh7c2Nyb2xsTGVmdDogJCgnI2NvbXBhcmVPdmVyYWxsJykuc2Nyb2xsTGVmdCgpIC0gMzAwfSwgMzAwKVxuXHRcdH0pO1xuXHRcdCQoJ2JvZHknKS5vbignbW91c2Vtb3ZlJywgZnVuY3Rpb24oZSl7XG5cdFx0XHRpZiAoZS5wYWdlWCA+ICQod2luZG93KS53aWR0aCgpLzIpIHtcblx0XHRcdFx0JCgnI2NvbXBhcmVSaWdodCcpLmNzcyh7b3BhY2l0eTogMX0pO1xuXHRcdFx0XHQkKCcjY29tcGFyZUxlZnQnKS5jc3Moe29wYWNpdHk6IDB9KTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdCQoJyNjb21wYXJlUmlnaHQnKS5jc3Moe29wYWNpdHk6IDB9KTtcblx0XHRcdFx0JCgnI2NvbXBhcmVMZWZ0JykuY3NzKHtvcGFjaXR5OiAxfSk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0Ly8gZmlsdGVyIGhlYWRcblx0XHQkKCcuY29tcGFyZS10YWJsZV9fZmlsdGVyIGEnKS5vbignY2xpY2snLCBmdW5jdGlvbigpe1xuXHRcdFx0JCgnLmNvbXBhcmUtdGFibGVfX2ZpbHRlcicpLmZpbmQoJy5jb21wYXJlLXRhYmxlX19maWx0ZXItLXNlbCcpLnJlbW92ZUNsYXNzKCdjb21wYXJlLXRhYmxlX19maWx0ZXItLXNlbCcpO1xuXHRcdFx0JCh0aGlzKS5wYXJlbnQoKS5hZGRDbGFzcygnY29tcGFyZS10YWJsZV9fZmlsdGVyLS1zZWwnKTtcblx0XHRcdC8vIHRvZG8gYWpheCBzaG93IGZpbHRlcmVkIHBhcmFtc1xuXHRcdFx0JC5hamF4KHttZXRob2Q6ICdHRVQnLCBkYXRhOicnfSwgZnVuY3Rpb24oZGF0YSl7XG5cdFx0XHRcdCQoJyNjb21wYXJlVGFibGUnKS5lbXB0eSgpO1xuXHRcdFx0fSk7XG5cblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9KTtcblxuXHR9XG59OyIsIm1vZHVsZS5leHBvcnRzID0ge1xuXHRpbml0OiBmdW5jdGlvbiAoKSB7XG5cdFx0Ly8gc2xpZGUgc3RhdGlzdGljcyBpbiB0aGUgY2hvY29sYXRlIGJsb2NrXG5cdFx0JCgnLm1haW4tc2xpZGVyJykuc2xpY2soe1xuXHRcdFx0c2xpZGVzVG9TaG93OiAxLFxuXHRcdFx0c2xpZGVzVG9TY3JvbGw6IDEsXG5cdFx0XHRpbmZpbml0ZTogdHJ1ZSxcblx0XHRcdGRvdHM6IHRydWUsXG5cdFx0XHRhcnJvd3M6IHRydWUsXG5cdFx0XHRhdXRvcGxheTogdHJ1ZSxcblx0XHRcdGF1dG9wbGF5U3BlZWQ6IDMwMDAsXG5cdFx0XHRwYXVzZU9uSG92ZXI6IHRydWUsXG5cdFx0XHRwcmV2QXJyb3c6ICQoJyNiYW5uZXJMZWZ0JyksXG5cdFx0XHRuZXh0QXJyb3c6ICQoJyNiYW5uZXJSaWdodCcpXG5cdFx0fSk7XG5cdH1cbn07IiwibW9kdWxlLmV4cG9ydHMgPSB7XG5cdGluaXQ6IGZ1bmN0aW9uICgpIHtcblx0XHRmdW5jdGlvbiBpbml0U2xpZGVyKCkge1xuXHRcdFx0Ly8gc2xpZGUgYmljeWNsZXNcblx0XHRcdCQoJyNwcm9kdWN0cycpLm9uKCdpbml0JywgZnVuY3Rpb24oKXtcblx0XHRcdFx0JCgnI3Byb2R1Y3RzJykuY3NzKHtvcGFjaXR5OiAxfSk7XG5cblx0XHRcdH0pLm9uKCdiZWZvcmVDaGFuZ2UnLCBmdW5jdGlvbihldmVudCwgc2xpY2ssIGN1cnJlbnRTbGlkZSwgbmV4dFNsaWRlKXtcblx0XHRcdFx0JCgnI3Byb2R1Y3RzJykuZmluZCgnLnByb2R1Y3RzX19pdGVtJykuZmluZCgnLnByb2R1Y3RzX19pdGVtLWluZm8nKS5oaWRlKCk7XG5cblx0XHRcdH0pLm9uKCdhZnRlckNoYW5nZScsIGZ1bmN0aW9uKGV2ZW50LCBzbGljaywgY3VycmVudFNsaWRlLCBuZXh0U2xpZGUpe1xuXHRcdFx0XHQkKCcjcHJvZHVjdHMnKS5maW5kKCcucHJvZHVjdHNfX2l0ZW0nKS5ub3QoJy5zbGljay1jZW50ZXInKS5maW5kKCcucHJvZHVjdHNfX2l0ZW0taW5mbycpLmhpZGUoKTtcblx0XHRcdFx0JCgnI3Byb2R1Y3RzJykuZmluZCgnLnNsaWNrLWNlbnRlciAucHJvZHVjdHNfX2l0ZW0taW5mbycpLmZhZGVJbigzMDApO1xuXG5cdFx0XHR9KTtcblx0XHRcdCQoJyNwcm9kdWN0cycpLnNsaWNrKHtcblx0XHRcdFx0Y2VudGVyTW9kZTogdHJ1ZSxcblx0XHRcdFx0Y2VudGVyUGFkZGluZzogMCxcblx0XHRcdFx0c2xpZGVzVG9TY3JvbGw6IDEsXG5cdFx0XHRcdHZhcmlhYmxlV2lkdGg6IHRydWUsXG5cdFx0XHRcdGFycm93czogdHJ1ZSxcblx0XHRcdFx0c3BlZWQ6IDQwMCxcblx0XHRcdFx0cHJldkFycm93OiAkKCcjcHJvZHVjdHNMZWZ0JyksXG5cdFx0XHRcdG5leHRBcnJvdzogJCgnI3Byb2R1Y3RzUmlnaHQnKSxcblx0XHRcdFx0Y29ycmVjdGlvbjogKCQoJyNwcm9kdWN0cycpLmRhdGEoJ2NvcnJlY3Rpb24nKSAhPT0gdW5kZWZpbmVkKSA/ICQoJyNwcm9kdWN0cycpLmRhdGEoJ2NvcnJlY3Rpb24nKSA6IDg1LFxuXHRcdFx0XHRpbmZpbml0ZTogdHJ1ZSxcblx0XHRcdFx0aW5pdGlhbFNsaWRlOiAxLFxuXHRcdFx0XHRyZXNwb25zaXZlOiBbXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0YnJlYWtwb2ludDogNzY4LFxuXHRcdFx0XHRcdFx0c2V0dGluZ3M6IHtcblx0XHRcdFx0XHRcdFx0c2xpZGVzVG9TaG93OiAxLFxuXHRcdFx0XHRcdFx0XHRzbGlkZXNUb1Njcm9sbDogMSxcblx0XHRcdFx0XHRcdFx0YXJyb3dzOiBmYWxzZSxcblx0XHRcdFx0XHRcdFx0Y2VudGVyUGFkZGluZzogMCxcblx0XHRcdFx0XHRcdFx0dmFyaWFibGVXaWR0aDogZmFsc2UsXG5cdFx0XHRcdFx0XHRcdGNvcnJlY3Rpb246IDBcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdF1cblx0XHRcdH0pO1xuXHRcdH1cblx0XHRpbml0U2xpZGVyKCk7XG5cdFx0JC5nZXQoJy9jYXRhbG9nL3NpbWlsYXIvJywgZnVuY3Rpb24ocmVzcG9uc2UpIHtcblx0XHRcdCQoJyNzYW1lJykuaHRtbChyZXNwb25zZSk7XG5cdFx0XHRpbml0U2xpZGVyKCk7XG5cdFx0fSk7XG5cblxuXHR9XG59OyIsIm1vZHVsZS5leHBvcnRzID0ge1xuXHRpbml0OiBmdW5jdGlvbiAoKSB7XG5cdFx0Ly8gc2xpZGUgYmljeWNsZXNcblx0XHQkKCcjY2FyZC12aWRlby1zbGlkZXInKS5zbGljayh7XG5cdFx0XHRjZW50ZXJQYWRkaW5nOiAwLFxuXHRcdFx0c2xpZGVzVG9TY3JvbGw6IDEsXG5cdFx0XHR2YXJpYWJsZVdpZHRoOiB0cnVlLFxuXHRcdFx0YXJyb3dzOiB0cnVlLFxuXHRcdFx0c3BlZWQ6IDMwMCxcblx0XHRcdHNsaWRlc1RvU2hvdzogMyxcblx0XHRcdHByZXZBcnJvdzogJCgnI2NhcmQtdmlkZW8tc2xpZGVyLXByZXYnKSxcblx0XHRcdG5leHRBcnJvdzogJCgnI2NhcmQtdmlkZW8tc2xpZGVyLW5leHQnKVxuXHRcdH0pO1xuXHR9XG59OyIsIm1vZHVsZS5leHBvcnRzID0ge1xuXHRpbml0OiBmdW5jdGlvbiAoKSB7XG5cdFx0dmFyIHZpZGVvcyA9IHJlcXVpcmUoJy4uL2NhcmQvdmlkZW9zJyk7XG5cdFx0dmFyIGNhcmRzQmxvY2sgPSB7XG5cdFx0XHRhbGxCbG9jazogJCgnI2NhcmRzQ29udGFpbmVyJyksXG5cdFx0XHRsb2FkQ29udGVudDogZnVuY3Rpb24oaWQsIGFjdGlvbil7XG5cdFx0XHRcdHZhciB1cmwgPSAoaWQgPT0gJ3ZpZGVvJykgPyAndmlkZW8nOiAnbG9hZCc7XG5cdFx0XHRcdC8vIHRvZG8gLSBhamF4IHJlcXVlc3QgdG8gYXBwZW5kIGRhdGEgdG8gdGhlIHRhYlxuXHRcdFx0XHQkLmFqYXgoe1xuXHRcdFx0XHRcdG1ldGhvZDogXCJHRVRcIixcblx0XHRcdFx0XHR1cmw6IFwiL2Fzc2V0cy9zY3JpcHRzL1wiICsgdXJsICsgXCIucGhwXCIsXG5cdFx0XHRcdFx0ZGF0YTogeyBpZDogaWQgfVxuXHRcdFx0XHR9KVxuXHRcdFx0XHQuZG9uZShmdW5jdGlvbiggZGF0YSApIHtcblx0XHRcdFx0XHQvLyBpZiB3ZSBsb2FkIG5ldyBjYXJkcyBhbmQgcmVtb3ZlIG9sZFxuXHRcdFx0XHRcdGlmIChhY3Rpb24gPT09ICdsb2FkJylcblx0XHRcdFx0XHRcdCQoJy5jYXJkcyAuY2FyZCcpLnJlbW92ZSgpO1xuXHRcdFx0XHRcdCQoJy5jYXJkcycpLmFwcGVuZChkYXRhKTtcblx0XHRcdFx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG5cdFx0XHRcdFx0XHQkKCcuY2FyZHMgLmNhcmQnKS5yZW1vdmVDbGFzcygnY2FyZC0tbG9hZGluZycpO1xuXHRcdFx0XHRcdFx0aWYgKGlkID09PSAndmlkZW8nKSB7XG5cdFx0XHRcdFx0XHRcdHZpZGVvcy5pbml0KCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSk7XG5cblx0XHRcdFx0fSk7XG5cdFx0XHR9LFxuXHRcdFx0bG9hZFRhYjogZnVuY3Rpb24odGFiKXtcblx0XHRcdFx0dGhpcy5hbGxCbG9jayA9ICQoJyNjYXJkc0NvbnRhaW5lcicpO1xuXHRcdFx0XHR2YXIgc2VsZWN0ZWRUYWIgPSAgdGFiLmNsb3Nlc3QoJy50YWJzX19wb2ludHMnKS5maW5kKCcudGFic19fcG9pbnRzX19pdGVtLS1zZWwnKTtcblx0XHRcdFx0Ly9kb24ndCBjbGljayBjdXJyZW50IHRhYlxuXHRcdFx0XHRpZiAodGFiLmhhc0NsYXNzKCd0YWJzX19wb2ludHNfX2l0ZW0tLXNlbCcpKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0c2VsZWN0ZWRUYWIucmVtb3ZlQ2xhc3MoJ3RhYnNfX3BvaW50c19faXRlbS0tc2VsJyk7XG5cdFx0XHRcdHRhYi5hZGRDbGFzcygndGFic19fcG9pbnRzX19pdGVtLS1zZWwnKTtcblxuXHRcdFx0XHR0aGlzLmxvYWRDb250ZW50KHRhYi5maW5kKCdhJykuZGF0YSgnaWQnKSwgJ2xvYWQnKTtcblxuXHRcdFx0XHR0aGlzLmN1cnJlbnRUYWJJZCA9IHRhYi5maW5kKCdhJykuZGF0YSgnaWQnKTtcblxuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9LFxuXHRcdFx0Y3VycmVudFRhYklkOiBudWxsLFxuXHRcdFx0aW5pdDogZnVuY3Rpb24oKXtcblx0XHRcdFx0dmFyIG1lID0gdGhpcztcblxuXHRcdFx0XHQkKCcjY2FyZFRhYnMgLnRhYnNfX3BvaW50c19faXRlbSBhJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKXtcblx0XHRcdFx0XHQkLnNjcm9sbFRvKCQoJy5jYXJkcycpLm9mZnNldCgpLnRvcCAtICQoJyN0YWJQb2ludHMnKS5vdXRlckhlaWdodCgpIC0gMzAsIDMwMCk7XG5cdFx0XHRcdFx0bWUubG9hZFRhYigkKHRoaXMpLnBhcmVudCgpKTtcblx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRcdCQoJyNzaG93TW9yZScpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCl7XG5cdFx0XHRcdFx0bWUubG9hZENvbnRlbnQobWUuY3VycmVudFRhYklkLCAnYWRkJyk7XG5cdFx0XHRcdFx0JChcIiN0YWJQb2ludHNcIikudHJpZ2dlcihcInN0aWNreV9raXQ6ZGV0YWNoXCIpO1xuXHRcdFx0XHRcdCQoJyN0YWJQb2ludHMnKS5zdGlja19pbl9wYXJlbnQoKTtcblx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdH07XG5cdFx0Ly8gdGFicyBvbiBtYWluIHBhZ2Vcblx0XHRpZiAoJCgnI3RhYlBvaW50cycpLmxlbmd0aCkge1xuXHRcdFx0Y2FyZHNCbG9jay5pbml0KCk7XG5cdFx0XHQkKCcjdGFiUG9pbnRzJykuc3RpY2tfaW5fcGFyZW50KCk7XG5cdFx0fVxuXHRcdC8vIHRhYnMgb24gaW5uZXIgcGFnZVxuXHRcdCQoJyNpbm5lclBvaW50cycpLnN0aWNrX2luX3BhcmVudCgpO1xuXHRcdCQoJyNpbm5lclBvaW50cyAudGFic19fcG9pbnRzX19pdGVtIGEnKS5vbignY2xpY2snLCBmdW5jdGlvbigpe1xuXHRcdFx0dmFyIHBhcmVudCA9ICQoJyNpbm5lclBvaW50cycpLnBhcmVudCgpO1xuXHRcdFx0dmFyIHBvaW50VG9wID0gMDtcblx0XHRcdGlmICghISQodGhpcykuZGF0YSgnc2Nyb2xsJykpIHtcblx0XHRcdFx0JC5zY3JvbGxUbygkKCcjJyArICQodGhpcykuZGF0YSgnaWQnKSkub2Zmc2V0KCkudG9wIC0gMTMyLCAzMDApXG5cdFx0XHR9XG5cdFx0XHRlbHNlIHtcblx0XHRcdFx0cGFyZW50LmZpbmQoJy50YWJzX19jb250ZW50JykucmVtb3ZlQ2xhc3MoJ3RhYnNfX2NvbnRlbnQtLXNob3duJyk7XG5cdFx0XHRcdCQoJyMnICsgJCh0aGlzKS5kYXRhKCdpZCcpKS5hZGRDbGFzcygndGFic19fY29udGVudC0tc2hvd24nKTtcblx0XHRcdFx0cG9pbnRUb3AgPSAkKCcjJyArICQodGhpcykuZGF0YSgnaWQnKSkub2Zmc2V0KCkudG9wIC0gJCgnI2lubmVyUG9pbnRzJykub3V0ZXJIZWlnaHQoKSAtMjA7XG5cdFx0XHRcdGlmICgkKHdpbmRvdykuc2Nyb2xsVG9wKCkgPiBwb2ludFRvcCkge1xuXHRcdFx0XHRcdCQuc2Nyb2xsVG8ocG9pbnRUb3AsIDMwMCk7XG5cdFx0XHRcdH1cblxuXHRcdFx0fVxuXHRcdFx0cGFyZW50LmZpbmQoJy50YWJzX19wb2ludHNfX2l0ZW0tLXNlbCcpLnJlbW92ZUNsYXNzKCd0YWJzX19wb2ludHNfX2l0ZW0tLXNlbCcpO1xuXHRcdFx0JCh0aGlzKS5wYXJlbnQoKS5hZGRDbGFzcygndGFic19fcG9pbnRzX19pdGVtLS1zZWwnKTtcblx0XHRcdHJldHVybiBmYWxzZTtcblxuXHRcdH0pXG5cdH1cbn07IiwibW9kdWxlLmV4cG9ydHMgPSB7XG5cdGluaXQ6IGZ1bmN0aW9uICgpIHtcblx0XHQoZnVuY3Rpb24oJCl7XG5cdFx0XHQkLmZuLnJlc2l6ZURvdHMgPSBmdW5jdGlvbihvcHRpb25zKXtcblx0XHRcdFx0dmFyIGRlZmF1bHRzID0geyB3aWR0aDogNjc0LCBoZWlnaHQ6IDQwMH0sXG5cdFx0XHRcdFx0bmV3V2lkdGgsIGssIG1lO1xuXG5cdFx0XHRcdG1lID0gdGhpcztcblxuXHRcdFx0XHRmdW5jdGlvbiBmaW5kTmV3S29lZigpe1xuXHRcdFx0XHRcdG5ld1dpZHRoID0gbWUud2lkdGgoKTtcblx0XHRcdFx0XHRrID0gbmV3V2lkdGgvZGVmYXVsdHMud2lkdGg7XG5cdFx0XHRcdFx0bWUuaGVpZ2h0KGRlZmF1bHRzLmhlaWdodCprKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGZ1bmN0aW9uIHJlY2FsY3VsYXRlKCkge1xuXHRcdFx0XHRcdG1lLmZpbmQoJy5ob3RzcG90JykuZWFjaChmdW5jdGlvbigpe1xuXHRcdFx0XHRcdFx0dmFyIHRvcCA9IHBhcnNlSW50KCQodGhpcykuZGF0YSgndG9wJykpLFxuXHRcdFx0XHRcdFx0XHRsZWZ0ID0gcGFyc2VJbnQoJCh0aGlzKS5kYXRhKCdsZWZ0JykpO1xuXG5cdFx0XHRcdFx0XHQkKHRoaXMpLmNzcyh7dG9wOiB0b3AqayArICdweCd9KTtcblx0XHRcdFx0XHR9KTtcblxuXHRcdFx0XHR9XG5cdFx0XHRcdC8vIGluaXRcblx0XHRcdFx0bWUuZmluZCgnLmhvdHNwb3QnKS5lYWNoKGZ1bmN0aW9uKCl7XG5cdFx0XHRcdFx0JCh0aGlzKS5kYXRhKHtsZWZ0OiAkKHRoaXMpLmNzcygnbGVmdCcpLCB0b3A6ICQodGhpcykuY3NzKCd0b3AnKSB9KTtcblx0XHRcdFx0fSk7XG5cdFx0XHRcdGZpbmROZXdLb2VmKCk7XG5cdFx0XHRcdHJlY2FsY3VsYXRlKCk7XG5cblx0XHRcdFx0JCh3aW5kb3cpLm9uKCdyZXNpemUnLCBmdW5jdGlvbigpe1xuXHRcdFx0XHRcdGZpbmROZXdLb2VmKCk7XG5cdFx0XHRcdFx0cmVjYWxjdWxhdGUoKTtcblx0XHRcdFx0fSk7XG5cdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0fTtcblx0XHRcdCQuZm4udmVsb3RhYnMgPSBmdW5jdGlvbihvcHRpb25zKXtcblx0XHRcdFx0dmFyIGRlZmF1bHRzID0geyBjbGFzc05hbWU6ICd0YWJzLXN3aXRjaGVyX19zZWxlY3RlZCd9LCBzZXR0aW5ncyA9IHt9O1xuXHRcdFx0XHR2YXIgbWUgPSB0aGlzO1xuXHRcdFx0XHQkLmV4dGVuZChzZXR0aW5ncywgZGVmYXVsdHMsIG9wdGlvbnMpO1xuXHRcdFx0XHRmdW5jdGlvbiBjaGFuZ2VUYWIoZWxlbSkge1xuXHRcdFx0XHRcdHZhciBpZCA9IGVsZW0uZGF0YSgnaWQnKTtcblx0XHRcdFx0XHR2YXIgdG9wUG9zID0gJCgnI2hvdHNwb3RzJykub2Zmc2V0KCkudG9wICsgJCgnI2hvdHNwb3RzJykub3V0ZXJIZWlnaHQoKS8yO1xuXHRcdFx0XHRcdG1lLmZpbmQoJy50YWJzLXN3aXRjaGVyX19jb250YWluZXInKS5oaWRlKCk7XG5cdFx0XHRcdFx0bWUuZmluZCgnLicgKyBzZXR0aW5ncy5jbGFzc05hbWUpLnRvZ2dsZUNsYXNzKHNldHRpbmdzLmNsYXNzTmFtZSk7XG5cdFx0XHRcdFx0ZWxlbS5wYXJlbnQoKS5hZGRDbGFzcyhzZXR0aW5ncy5jbGFzc05hbWUpO1xuXHRcdFx0XHRcdCQoJyMnICsgaWQpLnNob3coKTtcblx0XHRcdFx0XHRpZiAoJCh3aW5kb3cpLnNjcm9sbFRvcCgpID4gdG9wUG9zKSB7XG5cdFx0XHRcdFx0XHQkLnNjcm9sbFRvKHRvcFBvcywgMzAwKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0ZnVuY3Rpb24gY2hhbmdlSG90U3BvdChpZCl7XG5cdFx0XHRcdFx0JCgnI2hvdHNwb3RzIC5ob3RzcG90LXNlbCcpLnJlbW92ZUNsYXNzKCdob3RzcG90LXNlbCcpO1xuXHRcdFx0XHRcdGlmICgkKCcjJyArIGlkKS5sZW5ndGgpIHtcblx0XHRcdFx0XHRcdCQoJyMnICsgaWQpLmFkZENsYXNzKCdob3RzcG90LXNlbCcpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHRcdHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtcblx0XHRcdFx0XHQkKHRoaXMpLmZpbmQoJy50YWJzLXN3aXRjaGVyX19pdGVtIGEnKS5vbignY2xpY2snLCBmdW5jdGlvbigpe1xuXHRcdFx0XHRcdFx0Y2hhbmdlVGFiKCQodGhpcykpO1xuXHRcdFx0XHRcdFx0Y2hhbmdlSG90U3BvdCgnaG90c3BvdF8nICsgJCh0aGlzKS5kYXRhKCdpZCcpKTtcblx0XHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHQkKHRoaXMpLmZpbmQoJy5ob3RzcG90Jykub24oJ2NsaWNrJywgZnVuY3Rpb24oKXtcblx0XHRcdFx0XHRcdHZhciBpZCA9ICQodGhpcykuZGF0YSgnaWQnKTtcblx0XHRcdFx0XHRcdGNoYW5nZVRhYihtZS5maW5kKCcudGFicy1zd2l0Y2hlcl9faXRlbSBhW2RhdGEtaWQ9XCInICsgaWQgKyAnXCJdJykpO1xuXHRcdFx0XHRcdFx0Y2hhbmdlSG90U3BvdCgkKHRoaXMpLmF0dHIoJ2lkJykpO1xuXHRcdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHRcdH0pXG5cdFx0XHRcdH0pXG5cdFx0XHR9O1xuXHRcdH0pKCQpO1xuXHRcdCQoJyNob3RzcG90cycpLnJlc2l6ZURvdHMoKTtcblx0XHQkKCcjdmVsb21hc3RlclRhYnMnKS52ZWxvdGFicyh7Y2xhc3NOYW1lOiAndGFicy1zd2l0Y2hlcl9fc2VsZWN0ZWQnfSk7XG5cdFx0JCgnI3RhYnMnKS5zdGlja19pbl9wYXJlbnQoKTtcblx0XHQkKCcjc2lkZWJhcicpLnN0aWNrX2luX3BhcmVudCh7b2Zmc2V0X3RvcDogODB9KTtcblx0fVxufTsiXX0=
